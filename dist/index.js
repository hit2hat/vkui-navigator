!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("@babel/runtime/helpers/interopRequireDefault"),require("@babel/runtime/helpers/classCallCheck"),require("@babel/runtime/helpers/createClass"),require("@babel/runtime/helpers/possibleConstructorReturn"),require("@babel/runtime/helpers/getPrototypeOf"),require("@babel/runtime/helpers/inherits"),require("@babel/runtime/helpers/defineProperty"),require("@babel/runtime/helpers/assertThisInitialized"),require("@babel/runtime/helpers/typeof"),require("@babel/runtime/helpers/interopRequireWildcard"),require("@babel/runtime/helpers/toConsumableArray"),require("@babel/runtime/helpers/extends"),require("@babel/runtime/helpers/objectWithoutProperties"),require("react-dom"),require("@babel/runtime/helpers/slicedToArray"),require("@babel/runtime/helpers/get")):"function"==typeof define&&define.amd?define(["react","@babel/runtime/helpers/interopRequireDefault","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass","@babel/runtime/helpers/possibleConstructorReturn","@babel/runtime/helpers/getPrototypeOf","@babel/runtime/helpers/inherits","@babel/runtime/helpers/defineProperty","@babel/runtime/helpers/assertThisInitialized","@babel/runtime/helpers/typeof","@babel/runtime/helpers/interopRequireWildcard","@babel/runtime/helpers/toConsumableArray","@babel/runtime/helpers/extends","@babel/runtime/helpers/objectWithoutProperties","react-dom","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/get"],t):(e=e||self).app=t(e.React,e.interopRequireDefault,e._classCallCheck,e._createClass,e._possibleConstructorReturn,e._getPrototypeOf,e._inherits,e._defineProperty,e._assertThisInitialized,e._typeof,e.interopRequireWildcard,e.toConsumableArray,e._extends,e._objectWithoutProperties,e.ReactDOM,e._slicedToArray,e._get)}(this,(function(e,t,n,a,o,r,i,s,l,u,c,d,f,p,h,v,m){"use strict";var y="default"in e?e.default:e;t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n,a=a&&a.hasOwnProperty("default")?a.default:a,o=o&&o.hasOwnProperty("default")?o.default:o,r=r&&r.hasOwnProperty("default")?r.default:r,i=i&&i.hasOwnProperty("default")?i.default:i,s=s&&s.hasOwnProperty("default")?s.default:s,l=l&&l.hasOwnProperty("default")?l.default:l,u=u&&u.hasOwnProperty("default")?u.default:u,c=c&&c.hasOwnProperty("default")?c.default:c,d=d&&d.hasOwnProperty("default")?d.default:d,f=f&&f.hasOwnProperty("default")?f.default:f,p=p&&p.hasOwnProperty("default")?p.default:p,h=h&&h.hasOwnProperty("default")?h.default:h,v=v&&v.hasOwnProperty("default")?v.default:v,m=m&&m.hasOwnProperty("default")?m.default:m;var w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function g(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function b(e,t){return e(t={exports:{}},t.exports),t.exports}var P=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,a=n?Symbol.for("react.element"):60103,o=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,h=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,g=n?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case c:case d:case r:case s:case i:case p:return e;default:switch(e=e&&e.$$typeof){case u:case f:case l:return e;default:return t}}case m:case v:case o:return t}}}function P(e){return b(e)===d}t.typeOf=b,t.AsyncMode=c,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=l,t.Element=a,t.ForwardRef=f,t.Fragment=r,t.Lazy=m,t.Memo=v,t.Portal=o,t.Profiler=s,t.StrictMode=i,t.Suspense=p,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===d||e===s||e===i||e===p||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===l||e.$$typeof===u||e.$$typeof===f||e.$$typeof===y||e.$$typeof===w||e.$$typeof===g)},t.isAsyncMode=function(e){return P(e)||b(e)===c},t.isConcurrentMode=P,t.isContextConsumer=function(e){return b(e)===u},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return b(e)===f},t.isFragment=function(e){return b(e)===r},t.isLazy=function(e){return b(e)===m},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===o},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===i},t.isSuspense=function(e){return b(e)===p}}));g(P);P.typeOf,P.AsyncMode,P.ConcurrentMode,P.ContextConsumer,P.ContextProvider,P.Element,P.ForwardRef,P.Fragment,P.Lazy,P.Memo,P.Portal,P.Profiler,P.StrictMode,P.Suspense,P.isValidElementType,P.isAsyncMode,P.isConcurrentMode,P.isContextConsumer,P.isContextProvider,P.isElement,P.isForwardRef,P.isFragment,P.isLazy,P.isMemo,P.isPortal,P.isProfiler,P.isStrictMode,P.isSuspense;var E=b((function(e,t){"production"!==process.env.NODE_ENV&&function(){Object.defineProperty(t,"__esModule",{value:!0});var e="function"==typeof Symbol&&Symbol.for,n=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,h=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;var g=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var o=0,r="Warning: "+e.replace(/%s/g,(function(){return n[o++]}));"undefined"!=typeof console&&console.warn(r);try{throw new Error(r)}catch(e){}},b=function(e,t){if(void 0===t)throw new Error("`lowPriorityWarningWithoutStack(condition, format, ...args)` requires a warning message argument");if(!e){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];g.apply(void 0,[t].concat(a))}};function P(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:var p=e.type;switch(p){case u:case c:case o:case i:case r:case f:return p;default:var m=p&&p.$$typeof;switch(m){case l:case d:case s:return m;default:return t}}case v:case h:case a:return t}}}var E=u,S=c,O=l,_=s,k=n,M=d,x=o,T=v,C=h,N=a,A=i,j=r,R=f,B=!1;function D(e){return P(e)===c}t.typeOf=P,t.AsyncMode=E,t.ConcurrentMode=S,t.ContextConsumer=O,t.ContextProvider=_,t.Element=k,t.ForwardRef=M,t.Fragment=x,t.Lazy=T,t.Memo=C,t.Portal=N,t.Profiler=A,t.StrictMode=j,t.Suspense=R,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===c||e===i||e===r||e===f||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===h||e.$$typeof===s||e.$$typeof===l||e.$$typeof===d||e.$$typeof===m||e.$$typeof===y||e.$$typeof===w)},t.isAsyncMode=function(e){return B||(B=!0,b(!1,"The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),D(e)||P(e)===u},t.isConcurrentMode=D,t.isContextConsumer=function(e){return P(e)===l},t.isContextProvider=function(e){return P(e)===s},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return P(e)===d},t.isFragment=function(e){return P(e)===o},t.isLazy=function(e){return P(e)===v},t.isMemo=function(e){return P(e)===h},t.isPortal=function(e){return P(e)===a},t.isProfiler=function(e){return P(e)===i},t.isStrictMode=function(e){return P(e)===r},t.isSuspense=function(e){return P(e)===f}}()}));g(E);E.typeOf,E.AsyncMode,E.ConcurrentMode,E.ContextConsumer,E.ContextProvider,E.Element,E.ForwardRef,E.Fragment,E.Lazy,E.Memo,E.Portal,E.Profiler,E.StrictMode,E.Suspense,E.isValidElementType,E.isAsyncMode,E.isConcurrentMode,E.isContextConsumer,E.isContextProvider,E.isElement,E.isForwardRef,E.isFragment,E.isLazy,E.isMemo,E.isPortal,E.isProfiler,E.isStrictMode,E.isSuspense;var S=b((function(e){"production"===process.env.NODE_ENV?e.exports=P:e.exports=E})),O=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;function M(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var x=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(e){a[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,o=M(e),r=1;r<arguments.length;r++){for(var i in n=Object(arguments[r]))_.call(n,i)&&(o[i]=n[i]);if(O){a=O(n);for(var s=0;s<a.length;s++)k.call(n,a[s])&&(o[a[s]]=n[a[s]])}}return o},T="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",C=function(){};if("production"!==process.env.NODE_ENV){var N=T,A={},j=Function.call.bind(Object.prototype.hasOwnProperty);C=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}}}function R(e,t,n,a,o){if("production"!==process.env.NODE_ENV)for(var r in e)if(j(e,r)){var i;try{if("function"!=typeof e[r]){var s=Error((a||"React class")+": "+n+" type `"+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[r]+"`.");throw s.name="Invariant Violation",s}i=e[r](t,r,a,n,null,N)}catch(e){i=e}if(!i||i instanceof Error||C((a||"React class")+": type specification of "+n+" `"+r+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof i+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),i instanceof Error&&!(i.message in A)){A[i.message]=!0;var l=o?o():"";C("Failed "+n+" type: "+i.message+(null!=l?l:""))}}}R.resetWarningCache=function(){"production"!==process.env.NODE_ENV&&(A={})};var B=R,D=Function.call.bind(Object.prototype.hasOwnProperty),V=function(){};function I(){return null}"production"!==process.env.NODE_ENV&&(V=function(e){var t="Warning: "+e;"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(e){}});var L=function(e,t){var n="function"==typeof Symbol&&Symbol.iterator,a="@@iterator";var o="<<anonymous>>",r={array:u("array"),bool:u("boolean"),func:u("function"),number:u("number"),object:u("object"),string:u("string"),symbol:u("symbol"),any:l(I),arrayOf:function(e){return l((function(t,n,a,o,r){if("function"!=typeof e)return new s("Property `"+r+"` of component `"+a+"` has invalid PropType notation inside arrayOf.");var i=t[n];if(!Array.isArray(i))return new s("Invalid "+o+" `"+r+"` of type `"+d(i)+"` supplied to `"+a+"`, expected an array.");for(var l=0;l<i.length;l++){var u=e(i,l,a,o,r+"["+l+"]",T);if(u instanceof Error)return u}return null}))},element:l((function(t,n,a,o,r){var i=t[n];return e(i)?null:new s("Invalid "+o+" `"+r+"` of type `"+d(i)+"` supplied to `"+a+"`, expected a single ReactElement.")})),elementType:l((function(e,t,n,a,o){var r=e[t];return S.isValidElementType(r)?null:new s("Invalid "+a+" `"+o+"` of type `"+d(r)+"` supplied to `"+n+"`, expected a single ReactElement type.")})),instanceOf:function(e){return l((function(t,n,a,r,i){if(!(t[n]instanceof e)){var l=e.name||o;return new s("Invalid "+r+" `"+i+"` of type `"+function(e){if(!e.constructor||!e.constructor.name)return o;return e.constructor.name}(t[n])+"` supplied to `"+a+"`, expected instance of `"+l+"`.")}return null}))},node:l((function(e,t,n,a,o){return c(e[t])?null:new s("Invalid "+a+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")})),objectOf:function(e){return l((function(t,n,a,o,r){if("function"!=typeof e)return new s("Property `"+r+"` of component `"+a+"` has invalid PropType notation inside objectOf.");var i=t[n],l=d(i);if("object"!==l)return new s("Invalid "+o+" `"+r+"` of type `"+l+"` supplied to `"+a+"`, expected an object.");for(var u in i)if(D(i,u)){var c=e(i,u,a,o,r+"."+u,T);if(c instanceof Error)return c}return null}))},oneOf:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&(arguments.length>1?V("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):V("Invalid argument supplied to oneOf, expected an array.")),I;return l((function(t,n,a,o,r){for(var l=t[n],u=0;u<e.length;u++)if(i(l,e[u]))return null;var c=JSON.stringify(e,(function(e,t){return"symbol"===f(t)?String(t):t}));return new s("Invalid "+o+" `"+r+"` of value `"+String(l)+"` supplied to `"+a+"`, expected one of "+c+".")}))},oneOfType:function(e){if(!Array.isArray(e))return"production"!==process.env.NODE_ENV&&V("Invalid argument supplied to oneOfType, expected an instance of array."),I;for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof n)return V("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+p(n)+" at index "+t+"."),I}return l((function(t,n,a,o,r){for(var i=0;i<e.length;i++){if(null==(0,e[i])(t,n,a,o,r,T))return null}return new s("Invalid "+o+" `"+r+"` supplied to `"+a+"`.")}))},shape:function(e){return l((function(t,n,a,o,r){var i=t[n],l=d(i);if("object"!==l)return new s("Invalid "+o+" `"+r+"` of type `"+l+"` supplied to `"+a+"`, expected `object`.");for(var u in e){var c=e[u];if(c){var f=c(i,u,a,o,r+"."+u,T);if(f)return f}}return null}))},exact:function(e){return l((function(t,n,a,o,r){var i=t[n],l=d(i);if("object"!==l)return new s("Invalid "+o+" `"+r+"` of type `"+l+"` supplied to `"+a+"`, expected `object`.");var u=x({},t[n],e);for(var c in u){var f=e[c];if(!f)return new s("Invalid "+o+" `"+r+"` key `"+c+"` supplied to `"+a+"`.\nBad object: "+JSON.stringify(t[n],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(e),null,"  "));var p=f(i,c,a,o,r+"."+c,T);if(p)return p}return null}))}};function i(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function s(e){this.message=e,this.stack=""}function l(e){if("production"!==process.env.NODE_ENV)var n={},a=0;function r(r,i,l,u,c,d,f){if(u=u||o,d=d||l,f!==T){if(t){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}if("production"!==process.env.NODE_ENV&&"undefined"!=typeof console){var h=u+":"+l;!n[h]&&a<3&&(V("You are manually calling a React.PropTypes validation function for the `"+d+"` prop on `"+u+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),n[h]=!0,a++)}}return null==i[l]?r?null===i[l]?new s("The "+c+" `"+d+"` is marked as required in `"+u+"`, but its value is `null`."):new s("The "+c+" `"+d+"` is marked as required in `"+u+"`, but its value is `undefined`."):null:e(i,l,u,c,d)}var i=r.bind(null,!1);return i.isRequired=r.bind(null,!0),i}function u(e){return l((function(t,n,a,o,r,i){var l=t[n];return d(l)!==e?new s("Invalid "+o+" `"+r+"` of type `"+f(l)+"` supplied to `"+a+"`, expected `"+e+"`."):null}))}function c(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(c);if(null===t||e(t))return!0;var o=function(e){var t=e&&(n&&e[n]||e[a]);if("function"==typeof t)return t}(t);if(!o)return!1;var r,i=o.call(t);if(o!==t.entries){for(;!(r=i.next()).done;)if(!c(r.value))return!1}else for(;!(r=i.next()).done;){var s=r.value;if(s&&!c(s[1]))return!1}return!0;default:return!1}}function d(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":function(e,t){return"symbol"===e||!!t&&("Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol)}(t,e)?"symbol":t}function f(e){if(null==e)return""+e;var t=d(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function p(e){var t=f(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}return s.prototype=Error.prototype,r.checkPropTypes=B,r.resetWarningCache=B.resetWarningCache,r.PropTypes=r,r};function W(){}function H(){}H.resetWarningCache=W;var F=b((function(e){if("production"!==process.env.NODE_ENV){var t=S;e.exports=L(t.isElement,!0)}else e.exports=function(){function e(e,t,n,a,o,r){if(r!==T){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:H,resetWarningCache:W};return n.PropTypes=n,n}()})),Y=function(){return(Y=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function q(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(e,a[o])&&(n[a[o]]=e[a[o]])}return n}function U(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var a=Array(e),o=0;for(t=0;t<n;t++)for(var r=arguments[t],i=0,s=r.length;i<s;i++,o++)a[o]=r[i];return a}var X=["VKWebAppInit","VKWebAppGetCommunityAuthToken","VKWebAppAddToCommunity","VKWebAppGetUserInfo","VKWebAppSetLocation","VKWebAppGetClientVersion","VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGeodata","VKWebAppSetTitle","VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppJoinGroup","VKWebAppAllowMessagesFromGroup","VKWebAppDenyNotifications","VKWebAppAllowNotifications","VKWebAppOpenPayForm","VKWebAppOpenApp","VKWebAppShare","VKWebAppShowWallPostBox","VKWebAppScroll","VKWebAppResizeWindow","VKWebAppShowOrderBox","VKWebAppShowLeaderBoardBox","VKWebAppShowInviteBox","VKWebAppShowRequestBox","VKWebAppAddToFavorites"],$=[],K=null,z="undefined"!=typeof window,G=z&&window.webkit&&void 0!==window.webkit.messageHandlers&&void 0!==window.webkit.messageHandlers.VKWebAppClose,J=z?window.AndroidBridge:void 0,Q=G?window.webkit.messageHandlers:void 0,Z=z&&!J&&!Q,ee=Z?"message":"VKWebAppEvent";z&&(window.CustomEvent||(window.CustomEvent=function(){function e(e,t){var n=t||{bubbles:!1,cancelable:!1,detail:void 0},a=document.createEvent("CustomEvent");return a.initCustomEvent(e,!!n.bubbles,!!n.cancelable,n.detail),a}return e.prototype=Event.prototype,e}()),window.addEventListener(ee,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=U($);if(Z&&e[0]&&"data"in e[0]){var a=e[0].data,o=(a.webFrameId,a.connectVersion,q(a,["webFrameId","connectVersion"]));o.type&&"VKWebAppSettings"===o.type?K=o.frameId:n.forEach((function(e){e({detail:o})}))}else n.forEach((function(t){t.apply(null,e)}))})));var te=function(e,t){void 0===t&&(t={}),J&&"function"==typeof J[e]&&J[e](JSON.stringify(t)),Q&&Q[e]&&"function"==typeof Q[e].postMessage&&Q[e].postMessage(t),Z&&parent.postMessage({handler:e,params:t,type:"vk-connect",webFrameId:K,connectVersion:"1.6.5"},"*")},ne=function(e){$.push(e)},ae=function(e,t){var n,a,o=(n={current:0,next:function(){return this.current+=1,this.current}},a={},{add:function(e){var t=n.next();return a[t]=e,t},resolve:function(e,t,n){var o=a[e];o&&(n(t)?o.resolve(t):o.reject(t),a[e]=null)}});return t((function(e){if(e.detail&&e.detail.data){var t=e.detail.data,n=t.request_id,a=q(t,["request_id"]);n&&o.resolve(n,a,(function(e){return!("error_type"in e)}))}})),function(t,n){return new Promise((function(a,r){var i=o.add({resolve:a,reject:r});e(t,Y(Y({},n),{request_id:i}))}))}}(te,ne),oe={send:te,subscribe:ne,sendPromise:ae,unsubscribe:function(e){var t=$.indexOf(e);t>-1&&$.splice(t,1)},isWebView:function(){return!(!J&&!Q)},supports:function(e){return!(!J||"function"!=typeof J[e])||(!(!Q||!Q[e]||"function"!=typeof Q[e].postMessage)||!(Q||J||!X.includes(e)))}};if("object"!=typeof exports||"undefined"==typeof module){var re=null;"undefined"!=typeof window?re=window:"undefined"!=typeof global?re=global:"undefined"!=typeof self&&(re=self),re&&(re.vkConnect=oe,re.vkuiConnect=oe)}var ie=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.canUseEventListeners=t.canUseDOM=void 0;var n=!("undefined"==typeof window||!window.document||!window.document.createElement);t.canUseDOM=n;var a=n&&!!window.addEventListener;t.canUseEventListeners=a}));g(ie);ie.canUseEventListeners,ie.canUseDOM;var se=g(b((function(e,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var u=t(n),c=t(a),d=t(o),f=t(r),p=t(i),h=t(s),v=t(y),m=t(F),w=t(oe),g=function(e){function t(e,n){var a;return(0,u.default)(this,t),a=(0,d.default)(this,(0,f.default)(t).call(this,e)),ie.canUseDOM&&(n.document||window.document).body.setAttribute("scheme",e.scheme),a}return(0,p.default)(t,e),(0,c.default)(t,[{key:"componentDidUpdate",value:function(e){e.scheme!==this.props.scheme&&this.document.body.setAttribute("scheme",this.props.scheme)}},{key:"getChildContext",value:function(){return{isWebView:this.props.isWebView,webviewType:this.props.webviewType,scheme:this.props.scheme,app:this.props.app}}},{key:"render",value:function(){return this.props.children}},{key:"document",get:function(){return this.context.document||window.document}}]),t}(v.default.Component);l.default=g,(0,h.default)(g,"childContextTypes",{isWebView:m.default.bool,scheme:m.default.string,webviewType:m.default.oneOf(["vkapps","internal"]),app:m.default.string}),(0,h.default)(g,"defaultProps",{webviewType:"internal",isWebView:w.default.isWebView(),scheme:"client_light"}),(0,h.default)(g,"contextTypes",{document:m.default.object})}))),le=b((function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){for(var e=[],t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.forEach((function(t){if(t)switch((0,a.default)(t)){case"string":e.push(t);break;case"object":Object.keys(t).forEach((function(n){t[n]&&e.push(n)}));break;default:e.push(""+t)}})),e.join(" ")};var a=t(u)}));g(le);var ue=b((function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.platform=r,t.IS_PLATFORM_ANDROID=t.IS_PLATFORM_IOS=t.IOS=t.ANDROID=t.OS=void 0,t.OS=n,function(e){e.ANDROID="android",e.IOS="ios"}(n||(t.OS=n={}));var a=n.ANDROID;t.ANDROID=a;var o=n.IOS;function r(e){var t=e||ie.canUseDOM&&navigator.userAgent||"";return/android/i.test(t)?a:o}t.IOS=o;var i=r(),s=i===o;t.IS_PLATFORM_IOS=s;var l=i===a;t.IS_PLATFORM_ANDROID=l}));g(ue);ue.platform,ue.IS_PLATFORM_ANDROID,ue.IS_PLATFORM_IOS,ue.IOS,ue.ANDROID,ue.OS;var ce=b((function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,ue.platform)();return(0,o.default)(e,(t={},(0,a.default)(t,e+"--ios",n===ue.OS.IOS),(0,a.default)(t,e+"--android",n===ue.OS.ANDROID),t))};var a=t(s),o=t(le)}));g(ce);var de=b((function(e,t){var n,a;if(Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,"undefined"!=typeof document&&document.createElement){var o=document.createElement("div");for(var r in o.style){var i=r.match(/^(moz|webkit|ms|)(transition|animation)$/i);i&&(n=!0),i&&i[1]&&(a=i[1].toLowerCase())}}var s={supported:n,prefix:a,transitionEndEventName:a?a+"TransitionEnd":"transitionend",animationEndEventName:a?a+"AnimationEnd":"animationend"};t.default=s}));g(de);var fe=g(b((function(e,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var c=t(n),d=t(a),f=t(o),p=t(r),h=t(l),v=t(i),m=t(s),w=t(y),g=t(F),b=t(le),P=t(ce),E=t(de);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(n,!0).forEach((function(t){(0,m.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=(0,P.default)("Root"),k=function(e){function t(e){var n;return(0,c.default)(this,t),n=(0,f.default)(this,(0,p.default)(t).call(this)),(0,m.default)((0,h.default)(n),"onAnimationEnd",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{manual:!0};if(["root-android-animation-hide-back","root-android-animation-show-forward","root-ios-animation-hide-back","root-ios-animation-show-forward"].indexOf(e.animationName)>-1||e.manual){var t=n.state.isBack,a=n.state.prevView,o=n.state.nextView;n.setState({activeView:o,prevView:null,nextView:null,visibleViews:[o],transition:!1,isBack:void 0},(function(){t?n.window.scrollTo(0,n.state.scrolls[n.state.activeView]):n.window.scrollTo(0,0),n.props.onTransition&&n.props.onTransition({isBack:t,from:a,to:o})}))}})),n.state={activeView:e.activeView,prevView:null,nextView:null,visibleViews:[e.activeView],isBack:void 0,scrolls:{}},n}return(0,v.default)(t,e),(0,d.default)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.props.popout&&!e.popout&&this.blurActiveElement(),this.props.activeView!==e.activeView){var a=this.window.pageYOffset,o=e.children.find((function(t){return t.props.id===e.activeView||t.props.id===n.props.activeView})).props.id===this.props.activeView;this.blurActiveElement();var r=this.props.activeView,i=e.activeView;this.setState({scrolls:O({},this.state.scrolls,(0,m.default)({},e.activeView,a)),transition:!0,activeView:null,nextView:r,prevView:i,visibleViews:[r,i],isBack:o})}if(!t.transition&&this.state.transition){var s=this.document.getElementById("view-".concat(this.state.prevView)),l=this.document.getElementById("view-".concat(this.state.nextView));s.querySelector(".View__panel").scrollTop=this.state.scrolls[this.state.prevView],this.state.isBack&&(l.querySelector(".View__panel").scrollTop=this.state.scrolls[this.state.nextView]),this.waitAnimationFinish(this.state.isBack?s:l,this.onAnimationEnd)}}},{key:"waitAnimationFinish",value:function(e,t){if(E.default.supported){var n=E.default.prefix?E.default.prefix+"AnimationEnd":"animationend";e.removeEventListener(n,t),e.addEventListener(n,t)}else setTimeout(t.bind(this),ue.IS_PLATFORM_ANDROID?300:600)}},{key:"blurActiveElement",value:function(){void 0!==this.window&&this.document.activeElement&&this.document.activeElement.blur()}},{key:"render",value:function(){var e=this,t=this.props,n=t.popout,a=t.modal,o=this.state,r=o.transition,i=o.isBack,s=o.prevView,l=o.activeView,u=o.nextView,c=this.arrayChildren.filter((function(t){return e.state.visibleViews.indexOf(t.props.id)>=0}));return w.default.createElement("div",{className:(0,b.default)(_,this.props.className,{"Root--transition":r})},c.map((function(e){return w.default.createElement("div",{key:e.props.id,id:"view-".concat(e.props.id),className:(0,b.default)("Root__view",{"Root__view--hide-back":e.props.id===s&&i,"Root__view--hide-forward":e.props.id===s&&!i,"Root__view--show-back":e.props.id===u&&i,"Root__view--show-forward":e.props.id===u&&!i,"Root__view--active":e.props.id===l})},e)})),!!n&&w.default.createElement("div",{className:"Root__popout"},n),!!a&&w.default.createElement("div",{className:"Root__modal"},a))}},{key:"document",get:function(){return this.context.document||document}},{key:"window",get:function(){return this.context.window||window}},{key:"arrayChildren",get:function(){return[].concat(this.props.children)}}]),t}(w.default.Component);u.default=k,(0,m.default)(k,"propTypes",{className:g.default.string,activeView:g.default.string.isRequired,popout:g.default.node,modal:g.default.node,onTransition:g.default.func,children:g.default.node}),(0,m.default)(k,"defaultProps",{popout:null}),(0,m.default)(k,"contextTypes",{window:g.default.any,document:g.default.any})}))),pe=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getSupportedEvents=function(){if(n)return["touchstart","touchmove","touchend","touchcancel"];return["mousedown","mousemove","mouseup","mouseleave"]},t.rubber=function(e,t,n,a){if(a||e<0)return e;var o=n*Math.abs(e)*t/(t+n*Math.abs(e));return e<0?-o:o},t.touchEnabled=t.coordY=t.coordX=void 0;t.coordX=function(e){return e.clientX||e.touches&&e.touches[0].clientX};t.coordY=function(e){return e.clientY||e.touches&&e.touches[0].clientY};var n="undefined"!=typeof window&&"ontouchstart"in window;t.touchEnabled=n}));g(pe);pe.getSupportedEvents,pe.rubber,pe.touchEnabled,pe.coordY,pe.coordX;var he=b((function(e,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=u.TouchRootContext=void 0;var d=t(f),h=t(p),v=t(n),m=t(a),w=t(o),g=t(r),b=t(l),P=t(i),E=t(s),S=c(y),O=t(F);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){(0,E.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=(0,pe.getSupportedEvents)(),x=S.default.createContext(!1);u.TouchRootContext=x;var T=function(e){function t(){var e,n;(0,v.default)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=(0,w.default)(this,(e=(0,g.default)(t)).call.apply(e,[this].concat(o))),(0,E.default)((0,b.default)(n),"cancelClick",!1),(0,E.default)((0,b.default)(n),"gesture",{}),(0,E.default)((0,b.default)(n),"onStart",(function(e){n.gesture={startX:(0,pe.coordX)(e),startY:(0,pe.coordY)(e),startT:new Date,isPressed:!0};var t=k({},n.gesture,{originalEvent:e});n.props.onStart&&n.props.onStart(t),n.props.onStartX&&n.props.onStartX(t),n.props.onStartY&&n.props.onStartY(t),!pe.touchEnabled&&n.subscribe(n.document)})),(0,E.default)((0,b.default)(n),"onMove",(function(e){var t=n.gesture,a=t.isPressed,o=t.isX,r=t.isY,i=t.startX,s=t.startY;if(a){var l=(0,pe.coordX)(e)-i,u=(0,pe.coordY)(e)-s,c=Math.abs(l),d=Math.abs(u);if(e.touches&&e.touches.length>1)return n.onEnd(e);if(!o&&!r){var f=c>=5&&c>d,p=d>=5&&d>c,h=f&&!!n.props.onMoveX||!!n.props.onMove,v=p&&!!n.props.onMoveY||!!n.props.onMove;n.gesture.isY=p,n.gesture.isX=f,n.gesture.isSlideX=h,n.gesture.isSlideY=v,n.gesture.isSlide=h||v}if(n.gesture.isSlide){n.gesture.shiftX=l,n.gesture.shiftY=u,n.gesture.shiftXAbs=c,n.gesture.shiftYAbs=d;var m=k({},n.gesture,{originalEvent:e});n.props.onMove&&n.props.onMove(m),n.gesture.isSlideX&&n.props.onMoveX&&n.props.onMoveX(m),n.gesture.isSlideY&&n.props.onMoveY&&n.props.onMoveY(m)}}})),(0,E.default)((0,b.default)(n),"onEnd",(function(e){var t=n.gesture,a=t.isPressed,o=t.isSlide,r=t.isSlideX,i=t.isSlideY;if(a){var s=k({},n.gesture,{originalEvent:e});n.props.onEnd&&n.props.onEnd(s),i&&n.props.onEndY&&n.props.onEndY(s),r&&n.props.onEndX&&n.props.onEndX(s)}n.cancelClick="A"===e.target.tagName&&o,n.gesture={},!pe.touchEnabled&&n.unsubscribe(n.document)})),(0,E.default)((0,b.default)(n),"onDragStart",(function(e){"A"!==e.target.tagName&&"IMG"!==e.target.tagName||e.preventDefault()})),(0,E.default)((0,b.default)(n),"onClick",(function(e){n.cancelClick&&(n.cancelClick=!1,e.preventDefault()),n.props.onClick&&n.props.onClick(e)})),(0,E.default)((0,b.default)(n),"getRef",(function(e){n.container=e;var t=n.props.getRootRef;t&&("function"==typeof t?t(e):t.current=e)})),n}return(0,P.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.container.addEventListener(M[0],this.onStart,{capture:this.props.useCapture,passive:!1}),pe.touchEnabled&&this.subscribe(this.container)}},{key:"componentWillUnmount",value:function(){this.container.removeEventListener(M[0],this.onStart,{capture:this.props.useCapture,passive:!1}),pe.touchEnabled&&this.unsubscribe(this.container)}},{key:"subscribe",value:function(e){e.addEventListener(M[1],this.onMove,{capture:this.props.useCapture,passive:!1}),e.addEventListener(M[2],this.onEnd,{capture:this.props.useCapture,passive:!1}),e.addEventListener(M[3],this.onEnd,{capture:this.props.useCapture,passive:!1})}},{key:"unsubscribe",value:function(e){e.removeEventListener(M[1],this.onMove,{capture:this.props.useCapture,passive:!1}),e.removeEventListener(M[2],this.onEnd,{capture:this.props.useCapture,passive:!1}),e.removeEventListener(M[3],this.onEnd,{capture:this.props.useCapture,passive:!1})}},{key:"render",value:function(){var e=this.props,t=(e.onStart,e.onStartX,e.onStartY,e.onMove,e.onMoveX,e.onMoveY,e.onEnd,e.onEndX,e.onEndY,e.useCapture,e.component),n=(e.getRootRef,(0,h.default)(e,["onStart","onStartX","onStartY","onMove","onMoveX","onMoveY","onEnd","onEndX","onEndY","useCapture","component","getRootRef"])),a=t;return S.default.createElement(a,(0,d.default)({},n,{onDragStart:this.onDragStart,onClick:this.onClick,ref:this.getRef}),this.props.children)}},{key:"document",get:function(){return this.context.document||document}}]),t}(S.Component);u.default=T,(0,E.default)(T,"propTypes",{onStart:O.default.func,onStartX:O.default.func,onStartY:O.default.func,onMove:O.default.func,onMoveX:O.default.func,onMoveY:O.default.func,onEnd:O.default.func,onEndX:O.default.func,onEndY:O.default.func,useCapture:O.default.bool,component:O.default.string,children:O.default.node,onClick:O.default.func,getRootRef:O.default.oneOfType([O.default.func,O.default.shape({current:O.default.node})])}),(0,E.default)(T,"defaultProps",{component:"div",children:"",useCapture:!1}),(0,E.default)(T,"contextTypes",{document:O.default.any})}));g(he);he.TouchRootContext;var ve=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setTransformStyle=function(e,t){e.style.transform=t,e.style.webkitTransform=t}}));g(ve);ve.setTransformStyle;var me=b((function(e,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=u.TYPE_PAGE=u.TYPE_CARD=void 0;var f=t(d),p=t(n),h=t(a),v=t(o),m=t(r),w=t(l),g=t(i),b=t(s),P=c(y),E=t(F),S=c(he),O=t(ce),_=t(le),k=t(de);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){(0,b.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=(0,O.default)("ModalRoot"),C="modal-card";u.TYPE_CARD=C;var N="modal-page";function A(e,t){return e>=t[0]&&e<=t[1]}function j(e){return Math.max(0,Math.min(98,e))}u.TYPE_PAGE=N;var R=function(e){function t(e){var n;(0,p.default)(this,t),n=(0,v.default)(this,(0,m.default)(t).call(this,e)),(0,b.default)((0,w.default)(n),"preventTouch",(function(e){if(!e)return!1;for(;e.originalEvent;)e=e.originalEvent;e.preventDefault()})),(0,b.default)((0,w.default)(n),"onTouchMove",(function(e){if(!n.state.switching){var t=n.state.activeModal||n.state.nextModal;if(t){var a=n.modalsState[t];return a.type===N?n.onPageTouchMove(e,a):a.type===C?n.onCardTouchMove(e,a):void 0}}})),(0,b.default)((0,w.default)(n),"onTouchEnd",(function(e){var t=n.state.activeModal||n.state.nextModal;if(t){var a=n.modalsState[t];return a.type===N?n.onPageTouchEnd(e,a):a.type===C?n.onCardTouchEnd(e,a):void 0}})),(0,b.default)((0,w.default)(n),"onScroll",(function(e){var t=n.state.activeModal;if(t&&e.target.closest(".ModalPage__content")){var a=n.modalsState[t];a.contentScrolled=!0,clearTimeout(a.contentScrollStopTimeout),a.contentScrollStopTimeout=setTimeout((function(){a.contentScrolled&&(a.contentScrolled=!1)}),250)}})),(0,b.default)((0,w.default)(n),"prevNextSwitchEndHandler",(function(){if(n.activeTransitions=Math.max(0,n.activeTransitions-1),!(n.activeTransitions>0)){var e=n.state.nextModal,t={prevModal:null,nextModal:null,visibleModals:[e],activeModal:e,animated:!1,switching:!1};e||(t.history=[]),n.setState(t)}})),(0,b.default)((0,w.default)(n),"onMaskClick",(function(){n.state.switching||n.triggerActiveModalClose()}));var a=e.activeModal;return n.state={activeModal:null,prevModal:null,nextModal:a,visibleModals:a?[a]:[],animated:!!a,history:a?[a]:[],touchDown:!1,dragging:!1},n.activeTransitions=0,n.maskElementRef=P.default.createRef(),n.initModalsState(),n}return(0,g.default)(t,e),(0,h.default)(t,[{key:"initModalsState",value:function(){this.modalsState=this.modals.reduce((function(e,t){var n=t.props,a={};return"number"==typeof n.settlingHeight&&(a.settlingHeight=n.settlingHeight),a.dynamicContentHeight=!!n.dynamicContentHeight,a.onClose=t.props.onClose,a.id=t.props.id,e[a.id]=a,e}),{})}},{key:"componentDidMount",value:function(){this.initActiveModal()}},{key:"componentWillUnmount",value:function(){this.toggleDocumentScrolling(!0)}},{key:"componentDidUpdate",value:function(e,t){var n=this,a=this.state,o=a.activeModal,r=a.switching;if(o&&this.modalsState[o]&&!r&&this.props.children!==e.children){var i=this.modalsState[o];i&&i.type===N&&i.dynamicContentHeight&&requestAnimationFrame((function(){return n.checkPageContentHeight()}))}if(this.props.activeModal!==e.activeModal&&!this.state.switching){var s=this.props.activeModal,l=e.activeModal;if(null!==s&&!this.modalsState[s])return console.warn("[ModalRoot.componentDidUpdate] nextModal ".concat(s," not found"));var u=(0,f.default)(this.state.history),c=!1;return null===s?u=[]:-1!==u.indexOf(s)?(u=u.splice(0,u.indexOf(s)+1),c=!0):u.push(s),this.setState({activeModal:null,nextModal:s,prevModal:l,visibleModals:[s,l],history:u,isBack:c,animated:!0,inited:!1,switching:!1},(function(){null===s?n.closeActiveModal():n.initActiveModal()}))}this.state.switching&&!t.switching&&requestAnimationFrame((function(){return n.switchPrevNext()})),this.state.activeModal||this.state.prevModal||this.state.nextModal?this.toggleDocumentScrolling(!1):this.toggleDocumentScrolling(!0)}},{key:"blurActiveElement",value:function(){void 0!==this.window&&this.document.activeElement&&this.document.activeElement.blur()}},{key:"toggleDocumentScrolling",value:function(e){this.documentScrolling!==e&&(this.documentScrolling=e,e?this.window.removeEventListener("touchmove",this.preventTouch):this.window.addEventListener("touchmove",this.preventTouch,{passive:!1}))}},{key:"pickModal",value:function(e){return this.document.getElementById("modal-"+e)}},{key:"initActiveModal",value:function(){var e=this.state.activeModal||this.state.nextModal;if(e){var t=this.pickModal(e),n=this.modalsState[e];switch(t.querySelector(".ModalPage")?n.type=N:t.querySelector(".ModalCard")&&(n.type=C),n.type){case N:n.settlingHeight=n.settlingHeight||75,this.initPageModal(n,t);break;case C:this.initCardModal(n,t);break;default:console.warn("[ModalRoot.initActiveModal] modalState.type is unknown")}this.setState({inited:!0,switching:!0})}}},{key:"initPageModal",value:function(e,t){var n,a,o,r,i,s,l=t.querySelector(".ModalPage__content"),u=l.firstChild.offsetHeight;if(e.expandable=u>l.clientHeight,e.modalElement=t,e.innerElement=t.querySelector(".ModalPage__in-wrap"),e.headerElement=t.querySelector(".ModalPage__header"),e.contentElement=t.querySelector(".ModalPage__content"),e.footerElement=t.querySelector(".ModalPage__footer"),e.expandable){var c=(a=100-e.settlingHeight)/2,d=100-a;r=[0,c],i=[c,a+d/4],s=[a+d/4,100],n=!0,o=a}else{r=[o=a=100-(u+e.headerElement.offsetHeight)/e.innerElement.parentNode.offsetHeight*100,o+25],i=[o+25,o+25],s=[o+25,o+100],n=!1}e.expandedRange=r,e.collapsedRange=i,e.hiddenRange=s,e.translateY=o,e.translateYFrom=a,e.collapsed=n}},{key:"initCardModal",value:function(e,t){e.modalElement=t,e.innerElement=t.querySelector(".ModalCard__in"),e.translateY=0}},{key:"checkPageContentHeight",value:function(){var e=this.state.activeModal,t=this.pickModal(e);if(t){var n=this.modalsState[e],a=x({},n);this.initPageModal(n,t);var o=x({},n),r=Object.keys(o).reduce((function(e,t){return a[t]!==o[t]&&(e[t]=o[t]),e}),{});Object.keys(r).length&&(this.animateTranslate(n),this.animatePageHeader(n))}}},{key:"closeActiveModal",value:function(){var e=this.state.prevModal;if(!e)return console.warn("[ModalRoot.closeActiveModal] prevModal is ".concat(e));var t=this.modalsState[e];this.waitTransitionFinish(t,this.prevNextSwitchEndHandler),this.animateTranslate(t,100),this.setMaskOpacity(t,0)}},{key:"onPageTouchMove",value:function(e,t){var n=e.shiftY,a=e.startT,o=e.originalEvent;if(e.isY){if(!o.target.closest(".ModalPage__in"))return o.preventDefault();o.stopPropagation();var r=t.expandable,i=t.contentScrolled,s=t.collapsed,l=t.expanded;if(this.state.touchDown||(t.touchStartTime=a,t.touchStartContentScrollTop=t.contentElement.scrollTop,this.setState({touchDown:!0})),!i&&(null===t.touchMovePositive&&(t.touchMovePositive=n>0),!t.expandable||s||l&&t.touchMovePositive&&0===t.touchStartContentScrollTop||o.target.closest(".ModalPage__header"))){if(o.preventDefault(),!r&&n<0)return;!this.state.dragging&&this.setState({dragging:!0});var u=n/this.window.innerHeight*100,c=(0,pe.rubber)(u,72,.8,ue.IS_PLATFORM_ANDROID);t.touchShiftYPercent=u,t.translateYCurrent=j(t.translateY+c),this.animateTranslate(t,t.translateYCurrent),this.setMaskOpacity(t)}}else o.target.closest(".ModalPage")&&o.preventDefault()}},{key:"onCardTouchMove",value:function(e,t){var n=e.originalEvent,a=e.shiftY,o=e.startT;if(n.target.closest(".ModalCard__container")){this.state.touchDown||(t.touchStartTime=o,this.setState({touchDown:!0,dragging:!0}));var r=a/t.innerElement.offsetHeight*100,i=(0,pe.rubber)(r,72,1.2,ue.IS_PLATFORM_ANDROID);t.touchShiftYPercent=r,t.translateYCurrent=Math.max(0,t.translateY+i),this.animateTranslate(t,t.translateYCurrent),this.setMaskOpacity(t)}}},{key:"onPageTouchEnd",value:function(e,t){var n,a=this,o=e.startY,r=e.shiftY;if(t.contentScrolled=!1,t.touchMovePositive=null,this.state.dragging){var i=(o+r)/this.window.innerHeight*100,s=t.translateYCurrent;100!==(s=A(s=j(s+s/(new Date-t.touchStartTime)*240*.6*(t.touchShiftYPercent<0?-1:1)),t.expandedRange)?t.expandedRange[0]:A(s,t.collapsedRange)?t.translateYFrom:A(s,t.hiddenRange)?100:t.translateYFrom)&&i>=75&&(s=100),t.translateY=s,t.translateYCurrent=s,t.collapsed=s>0&&s<i,t.expanded=0===s,t.hidden=100===s,t.hidden&&t.onClose(),n=function(){!t.hidden&&a.animateTranslate(t),a.setMaskOpacity(t)}}this.setState({touchDown:!1,dragging:!1},n)}},{key:"onCardTouchEnd",value:function(e,t){var n,a=this;if(this.state.dragging){var o=t.translateYCurrent,r=o/(new Date-t.touchStartTime)*240*.6*(t.touchShiftYPercent<0?-1:1);o=(o=Math.max(0,o+r))>=30?100:0,t.translateY=o,t.hidden=100===o,t.hidden&&t.onClose(),n=function(){!t.hidden&&a.animateTranslate(t),a.setMaskOpacity(t)}}this.setState({touchDown:!1,dragging:!1},n)}},{key:"waitTransitionFinish",value:function(e,t){var n=k.default.transitionEndEventName;e.innerElement.addEventListener(n,(function a(){e.innerElement.removeEventListener(n,a),t()}))}},{key:"switchPrevNext",value:function(){var e=this,t=this.state,n=t.prevModal,a=t.nextModal,o=this.modalsState[n],r=this.modalsState[a];if(!o&&!r)return console.warn("[ModalRoot.switchPrevNext] prevModal is ".concat(n,", nextModal is ").concat(a));var i=!!o&&o.type===N,s=!!o&&o.type===C,l=!!r&&r.type===N,u=!!r&&r.type===C;if(o&&(u||s&&l))return this.waitTransitionFinish(o,(function(){e.activeTransitions+=1,e.waitTransitionFinish(r,e.prevNextSwitchEndHandler),e.animateTranslate(r)})),this.animateTranslate(o,100);o&&l&&(this.activeTransitions+=1,this.waitTransitionFinish(o,this.prevNextSwitchEndHandler),i&&o.translateY<=r.translateYFrom&&!this.state.isBack?this.animateTranslate(o,r.translateYFrom+10):this.animateTranslate(o,100)),this.activeTransitions+=1,this.waitTransitionFinish(r,this.prevNextSwitchEndHandler),this.animateTranslate(r)}},{key:"animateTranslate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===t&&(t=e.translateY);var n="animateTranslateFrame".concat(e.id);cancelAnimationFrame(this[n]),this[n]=requestAnimationFrame((function(){if((0,ve.setTransformStyle)(e.innerElement,"translateY(".concat(t,"%)")),e.type===N&&e.footerElement){var n=e.footerElement.offsetHeight,a=e.innerElement.offsetHeight*(t/100);(0,ve.setTransformStyle)(e.footerElement,"translateY(calc(".concat(n,"px * -").concat(a/n,"))"))}})),e.type===N&&e.expandable&&this.animatePageHeader(e,t)}},{key:"animatePageHeader",value:function(e,t){var n=t<15?Math.max(0,15-t)/15:0;requestAnimationFrame((function(){var t=e.headerElement.querySelector(".ModalPageHeader__shadow");t&&(t.style.opacity=n)}))}},{key:"setMaskOpacity",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===n&&this.state.history[0]!==e.id||(cancelAnimationFrame(this.maskAnimationFrame),this.maskAnimationFrame=requestAnimationFrame((function(){if(t.maskElementRef.current){var a=e.translateY,o=e.translateYCurrent,r=null===n?1-(o-a)/(100-a)||0:n;t.maskElementRef.current.style.opacity=Math.max(0,Math.min(100,r))}})))}},{key:"triggerActiveModalClose",value:function(){var e=this.modalsState[this.state.activeModal];e&&e.onClose()}},{key:"render",value:function(){var e=this,t=this.state,n=t.prevModal,a=t.activeModal,o=t.nextModal,r=t.visibleModals,i=t.animated,s=t.touchDown,l=t.dragging,u=t.switching;return a||n||o||i?P.default.createElement(S.TouchRootContext.Provider,{value:!0},P.default.createElement(S.default,{className:(0,_.default)(T,{"ModalRoot--vkapps":"vkapps"===this.webviewType,"ModalRoot--touched":s,"ModalRoot--switching":u}),onMove:this.onTouchMove,onEnd:this.onTouchEnd,onScroll:this.onScroll},P.default.createElement("div",{className:"ModalRoot__mask",onClick:this.onMaskClick,ref:this.maskElementRef}),P.default.createElement("div",{className:"ModalRoot__viewport"},this.modals.map((function(t){var i=t.props.id;if(-1===r.indexOf(t.props.id))return null;var s=e.modalsState[i],u=s.type===N,c="modal-"+i;return P.default.createElement("div",{key:c,id:c,className:(0,_.default)("ModalRoot__modal",{"ModalRoot__modal--active":i===a,"ModalRoot__modal--prev":i===n,"ModalRoot__modal--next":i===o,"ModalRoot__modal--dragging":l,"ModalRoot__modal--expandable":u&&s.expandable,"ModalRoot__modal--expanded":u&&s.expanded,"ModalRoot__modal--collapsed":u&&s.collapsed})},t)}))))):null}},{key:"document",get:function(){return this.context.document||document}},{key:"window",get:function(){return this.context.window||window}},{key:"webviewType",get:function(){return this.context.webviewType||"vkapps"}},{key:"modals",get:function(){return[].concat(this.props.children)}}]),t}(P.Component);(0,b.default)(R,"propTypes",{activeModal:E.default.string,children:E.default.node}),(0,b.default)(R,"contextTypes",{window:E.default.any,document:E.default.any,webviewType:E.default.oneOf(["vkapps","internal"])});var B=R;u.default=B})),ye=g(me),we=(me.TYPE_PAGE,me.TYPE_CARD,g(b((function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t(y),o=t(F),r=t(ce),i=t(le),s=(0,r.default)("ModalPageHeader");function l(e){var t=e.className,n=e.left,o=e.right,r=e.children,l=e.noShadow,u=e.getRef,c="string"==typeof r||"number"==typeof r;return a.default.createElement("div",{className:(0,i.default)(s,t),ref:u},a.default.createElement("div",{className:"ModalPageHeader__in"},a.default.createElement("div",{className:"ModalPageHeader__left"},n),a.default.createElement("div",{className:"ModalPageHeader__content"},a.default.createElement("div",{className:"ModalPageHeader__content-in"},c?a.default.createElement("span",null,r):r)),a.default.createElement("div",{className:"ModalPageHeader__right"},o)),!l&&a.default.createElement("div",{className:"ModalPageHeader__shadow"}))}l.propTypes={className:o.default.string,left:o.default.node,right:o.default.node,children:o.default.node,noShadow:o.default.bool,getRef:o.default.oneOfType([o.default.func,o.default.shape({current:o.default.any})])},l.defaultProps={noShadow:!1};var u=l;n.default=u})))),ge=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getOffsetRect=function(e){var t=e.getBoundingClientRect(),n=document.body,a=document.documentElement,o=window.pageYOffset||a.scrollTop||n.scrollTop,r=window.pageXOffset||a.scrollLeft||n.scrollLeft,i=a.clientTop||n.clientTop||0,s=a.clientLeft||n.clientLeft||0;return{top:Math.round(t.top+o-i),left:Math.round(t.left+r-s),width:e.offsetWidth,height:e.offsetHeight}}}));g(ge);ge.getOffsetRect;var be=b((function(e,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=u.ACTIVE_EFFECT_DELAY=void 0;var d=t(f),h=t(p),v=t(n),m=t(a),w=t(o),g=t(r),b=t(l),P=t(i),E=t(s),S=c(y),O=t(F),_=c(he),k=t(le),M=t(ce);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){(0,E.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=function(){return+Date.now()},N=(0,M.default)("Tappable"),A=70;u.ACTIVE_EFFECT_DELAY=600;var j={};function R(e){Object.keys(j).filter((function(t){return t!==e})).forEach((function(e){clearTimeout(j[e].activeTimeout),clearTimeout(j[e].timeout),j[e].stop(),delete j[e]}))}var B=function(e){function t(e){var n;return(0,v.default)(this,t),n=(0,w.default)(this,(0,g.default)(t).call(this,e)),(0,E.default)((0,b.default)(n),"isSlide",!1),(0,E.default)((0,b.default)(n),"onStart",(function(e){var t=e.originalEvent;if(!n.insideTouchRoot&&n.props.stopPropagation&&t.stopPropagation(),t.touches&&t.touches.length>1)return R();ue.IS_PLATFORM_ANDROID&&n.onDown(t),j[n.id]={},n.getStorage().stop=n.stop,n.getStorage().activeTimeout=setTimeout(n.start,A)})),(0,E.default)((0,b.default)(n),"onMove",(function(e){var t=e.originalEvent,a=e.shiftXAbs,o=e.shiftYAbs;!n.insideTouchRoot&&n.props.stopPropagation&&t.stopPropagation(),(a>20||o>20)&&(n.isSlide=!0,n.stop())})),(0,E.default)((0,b.default)(n),"onEnd",(function(e){var t=e.originalEvent;!n.insideTouchRoot&&n.props.stopPropagation&&t.stopPropagation();var a=C();if(t.touches&&t.touches.length>0)n.isSlide=!1;else{if(n.state.active)if(a-n.state.ts>=100)n.stop();else{var o=setTimeout(n.stop,n.props.activeEffectDelay-a+n.state.ts),r=n.getStorage();r&&(r.timeout=o)}else if(!n.isSlide){n.start();var i=setTimeout(n.stop,n.props.activeEffectDelay);n.getStorage()?(clearTimeout(n.getStorage().activeTimeout),n.getStorage().timeout=i):n.timeout=i}n.isSlide=!1}})),(0,E.default)((0,b.default)(n),"onDown",(function(e){if(ue.IS_PLATFORM_ANDROID){var t=(0,ge.getOffsetRect)(n.container),a=t.top,o=t.left,r=(0,pe.coordX)(e),i=(0,pe.coordY)(e),s="wave"+Date.now().toString();n.setState((function(e){return{clicks:T({},e.clicks,(0,E.default)({},s,{x:Math.round(r-o),y:Math.round(i-a)}))}})),n.wavesTimeout=setTimeout((function(){n.setState((function(e){var t=T({},e.clicks);return delete t[s],{clicks:t}}))}),225)}})),(0,E.default)((0,b.default)(n),"start",(function(){n.state.active||n.setState({active:!0,ts:C()}),R(n.id)})),(0,E.default)((0,b.default)(n),"stop",(function(){n.state.active&&n.setState({active:!1,ts:null}),n.getStorage()&&(clearTimeout(n.getStorage().activeTimeout),delete j[n.id])})),(0,E.default)((0,b.default)(n),"getStorage",(function(){return j[n.id]})),(0,E.default)((0,b.default)(n),"getRef",(function(e){n.container=e;var t=n.props.getRootRef;t&&("function"==typeof t?t(e):t.current=e)})),n.id=Math.round(1e8*Math.random()).toString(16),n.state={clicks:{},active:!1,ts:null},n}return(0,P.default)(t,e),(0,m.default)(t,[{key:"componentWillUnmount",value:function(){j[this.id]&&(clearTimeout(j[this.id].timeout),clearTimeout(j[this.id].activeTimeout),delete j[this.id]),clearTimeout(this.wavesTimeout)}},{key:"render",value:function(){var e=this,t=this.state,n=t.clicks,a=t.active,o=this.props,r=o.children,i=o.className,s=o.component,l=(o.activeEffectDelay,o.stopPropagation,o.getRootRef,(0,h.default)(o,["children","className","component","activeEffectDelay","stopPropagation","getRootRef"])),u=l.disabled?s:_.default,c=(0,k.default)(N,i,{"Tappable--active":a,"Tappable--inactive":!a}),f={};return l.disabled||(f.component=s,f.onStart=this.onStart,f.onMove=this.onMove,f.onEnd=this.onEnd),"string"==typeof u?f.ref=this.getRef:f.getRootRef=this.getRef,S.default.createElement(_.TouchRootContext.Consumer,null,(function(t){return e.insideTouchRoot=t,S.default.createElement(u,(0,d.default)({},l,{className:c},f),ue.IS_PLATFORM_ANDROID&&S.default.createElement("span",{className:"Tappable__waves"},Object.keys(n).map((function(e){return S.default.createElement("span",{className:"Tappable__wave",style:{top:n[e].y,left:n[e].x},key:e})}))),r)}))}}]),t}(S.Component);u.default=B,(0,E.default)(B,"propTypes",{onClick:O.default.func,className:O.default.string,children:O.default.node,component:O.default.oneOfType([O.default.string,O.default.element]),role:O.default.string,activeEffectDelay:O.default.number,stopPropagation:O.default.bool,disabled:O.default.bool,getRootRef:O.default.oneOfType([O.default.func,O.default.shape({current:O.default.any})])}),(0,E.default)(B,"defaultProps",{component:"div",role:"button",stopPropagation:!1,disabled:!1,activeEffectDelay:600})}));g(be);be.ACTIVE_EFFECT_DELAY;var Pe=b((function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SSRWrapper=n.SSRContext=void 0;var a=t(y),o=a.default.createContext({platform:null});n.SSRContext=o;n.SSRWrapper=function(e){var t=e.userAgent,n=e.children;return a.default.createElement(o.Provider,{value:{platform:(0,ue.platform)(t)}},n)}}));g(Pe);Pe.SSRWrapper,Pe.SSRContext;var Ee=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,y.useContext)(Pe.SSRContext).platform||(0,ue.platform)()}}));g(Ee);var Se,Oe=g(b((function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t(f),o=t(p),r=t(y),i=t(be),s=t(ce),l=t(le),u=t(Ee),c=function(e){var t=e.className,n=e.children,c=e.primary,d=(0,o.default)(e,["className","children","primary"]),f="string"==typeof n||"number"==typeof n,p=d.href?"a":"button",h=(0,u.default)();return r.default.createElement(i.default,(0,a.default)({},d,{component:p,activeEffectDelay:200,className:(0,l.default)((0,s.default)("HeaderButton",h),t,{"HeaderButton--primary":c})}),f?r.default.createElement("span",{className:"HeaderButton__primitive"},n):n)};c.defaultProps={primary:!1};var d=c;n.default=d}))),_e=!("undefined"==typeof window||!window.document||!window.document.createElement);if(_e){var ke=Element.prototype;ke.matches||(ke.matches=ke.matchesSelector||ke.webkitMatchesSelector||ke.mozMatchesSelector||ke.msMatchesSelector),ke.closest||(ke.closest=function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null})}Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("callback must be a function");for(var t=Object(this),n=t.length>>>0,a=arguments[1],o=0;o<n;o++){var r=t[o];if(e.call(a,r,o,t))return r}}),function(e){e.ANDROID="android",e.IOS="ios"}(Se||(Se={}));var Me=Se.ANDROID,xe=Se.IOS;function Te(e){var t=e||_e&&navigator.userAgent||"";return/android/i.test(t)?Me:xe}Te();var Ce=y.createContext({platform:null});var Ne=b((function(e,t){e.exports=function(){var e=function(e){var t=e.id,n=e.viewBox,a=e.content;this.id=t,this.viewBox=n,this.content=a};function t(e,t){return e(t={exports:{}},t.exports),t.exports}e.prototype.stringify=function(){return this.content},e.prototype.toString=function(){return this.stringify()},e.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))},"undefined"!=typeof window?window:void 0!==w||"undefined"!=typeof self&&self;var n=t((function(e,t){e.exports=function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(t,n){var o;return n&&!0===n.clone&&e(t)?a((o=t,Array.isArray(o)?[]:{}),t,n):t}function n(n,o,r){var i=n.slice();return o.forEach((function(o,s){void 0===i[s]?i[s]=t(o,r):e(o)?i[s]=a(n[s],o,r):-1===n.indexOf(o)&&i.push(t(o,r))})),i}function a(o,r,i){var s=Array.isArray(r),l=(i||{arrayMerge:n}).arrayMerge||n;return s?Array.isArray(o)?l(o,r,i):t(r,i):function(n,o,r){var i={};return e(n)&&Object.keys(n).forEach((function(e){i[e]=t(n[e],r)})),Object.keys(o).forEach((function(s){e(o[s])&&n[s]?i[s]=a(n[s],o[s],r):i[s]=t(o[s],r)})),i}(o,r,i)}return a.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return a(e,n,t)}))},a}()})),a=t((function(e,t){t.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},e.exports=t.default})),o=a.svg,r=a.xlink,i={};i[o.name]=o.uri,i[r.name]=r.uri;var s=function(e,t){return void 0===e&&(e=""),"<svg "+function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(n(i,t||{}))+">"+e+"</svg>"};return function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n}(s(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(e)}()}));function Ae(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),a=1;a<arguments.length;a++){var o=arguments[a];if(null!=o)for(var r=Object.keys(Object(o)),i=0,s=r.length;i<s;i++){var l=r[i],u=Object.getOwnPropertyDescriptor(o,l);void 0!==u&&u.enumerable&&(n[l]=o[l])}}return n}var je={assign:Ae,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:Ae})}},Re=b((function(e,t){e.exports=function(){function e(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:void 0!==w||"undefined"!=typeof self&&self;var t=e((function(e,t){e.exports=function(){function e(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}function t(t,n){var o;return n&&!0===n.clone&&e(t)?a((o=t,Array.isArray(o)?[]:{}),t,n):t}function n(n,o,r){var i=n.slice();return o.forEach((function(o,s){void 0===i[s]?i[s]=t(o,r):e(o)?i[s]=a(n[s],o,r):-1===n.indexOf(o)&&i.push(t(o,r))})),i}function a(o,r,i){var s=Array.isArray(r),l=(i||{arrayMerge:n}).arrayMerge||n;return s?Array.isArray(o)?l(o,r,i):t(r,i):function(n,o,r){var i={};return e(n)&&Object.keys(n).forEach((function(e){i[e]=t(n[e],r)})),Object.keys(o).forEach((function(s){e(o[s])&&n[s]?i[s]=a(n[s],o[s],r):i[s]=t(o[s],r)})),i}(o,r,i)}return a.all=function(e,t){if(!Array.isArray(e)||e.length<2)throw new Error("first argument should be an array with at least two elements");return e.reduce((function(e,n){return a(e,n,t)}))},a}()})),n=e((function(e,t){t.default={svg:{name:"xmlns",uri:"http://www.w3.org/2000/svg"},xlink:{name:"xmlns:xlink",uri:"http://www.w3.org/1999/xlink"}},e.exports=t.default})),a=n.svg,o=n.xlink,r={};r[a.name]=a.uri,r[o.name]=o.uri;var i,s=function(e,n){return void 0===e&&(e=""),"<svg "+function(e){return Object.keys(e).map((function(t){return t+'="'+e[t].toString().replace(/"/g,"&quot;")+'"'})).join(" ")}(t(r,n||{}))+">"+e+"</svg>"},l=n.svg,u=n.xlink,c={attrs:(i={style:["position: absolute","width: 0","height: 0"].join("; ")},i[l.name]=l.uri,i[u.name]=u.uri,i)},d=function(e){this.config=t(c,e||{}),this.symbols=[]};d.prototype.add=function(e){var t=this.symbols,n=this.find(e.id);return n?(t[t.indexOf(n)]=e,!1):(t.push(e),!0)},d.prototype.remove=function(e){var t=this.symbols,n=this.find(e);return!!n&&(t.splice(t.indexOf(n),1),n.destroy(),!0)},d.prototype.find=function(e){return this.symbols.filter((function(t){return t.id===e}))[0]||null},d.prototype.has=function(e){return null!==this.find(e)},d.prototype.stringify=function(){var e=this.config.attrs,t=this.symbols.map((function(e){return e.stringify()})).join("");return s(t,e)},d.prototype.toString=function(){return this.stringify()},d.prototype.destroy=function(){this.symbols.forEach((function(e){return e.destroy()}))};var f=function(e){var t=e.id,n=e.viewBox,a=e.content;this.id=t,this.viewBox=n,this.content=a};f.prototype.stringify=function(){return this.content},f.prototype.toString=function(){return this.stringify()},f.prototype.destroy=function(){var e=this;["id","viewBox","content"].forEach((function(t){return delete e[t]}))};var p=function(e){var t=!!document.importNode,n=(new DOMParser).parseFromString(e,"image/svg+xml").documentElement;return t?document.importNode(n,!0):n},h=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={isMounted:{}};return n.isMounted.get=function(){return!!this.node},t.createFromExistingNode=function(e){return new t({id:e.getAttribute("id"),viewBox:e.getAttribute("viewBox"),content:e.outerHTML})},t.prototype.destroy=function(){this.isMounted&&this.unmount(),e.prototype.destroy.call(this)},t.prototype.mount=function(e){if(this.isMounted)return this.node;var t="string"==typeof e?document.querySelector(e):e,n=this.render();return this.node=n,t.appendChild(n),n},t.prototype.render=function(){var e=this.stringify();return p(s(e)).childNodes[0]},t.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},Object.defineProperties(t.prototype,n),t}(f),v={autoConfigure:!0,mountTo:"body",syncUrlsWithBaseTag:!1,listenLocationChangeEvent:!0,locationChangeEvent:"locationChange",locationChangeAngularEmitter:!1,usagesToUpdate:"use[*|href]",moveGradientsOutsideSymbol:!1},m=function(e){return Array.prototype.slice.call(e,0)},y={isChrome:function(){return/chrome/i.test(navigator.userAgent)},isFirefox:function(){return/firefox/i.test(navigator.userAgent)},isIE:function(){return/msie/i.test(navigator.userAgent)||/trident/i.test(navigator.userAgent)},isEdge:function(){return/edge/i.test(navigator.userAgent)}},g=function(e){var t=[];return m(e.querySelectorAll("style")).forEach((function(e){e.textContent+="",t.push(e)})),t},b=function(e){return(e||window.location.href).split("#")[0]},P=function(e){angular.module("ng").run(["$rootScope",function(t){t.$on("$locationChangeSuccess",(function(t,n,a){var o,r,i;o=e,r={oldUrl:a,newUrl:n},(i=document.createEvent("CustomEvent")).initCustomEvent(o,!1,!1,r),window.dispatchEvent(i)}))}])},E=function(e,t){return void 0===t&&(t="linearGradient, radialGradient, pattern"),m(e.querySelectorAll("symbol")).forEach((function(e){m(e.querySelectorAll(t)).forEach((function(t){e.parentNode.insertBefore(t,e)}))})),e},S=n.xlink.uri,O="xlink:href",_=/[{}|\\\^\[\]`"<>]/g;function k(e){return e.replace(_,(function(e){return"%"+e[0].charCodeAt(0).toString(16).toUpperCase()}))}var M=["clipPath","colorProfile","src","cursor","fill","filter","marker","markerStart","markerMid","markerEnd","mask","stroke","style"],x=M.map((function(e){return"["+e+"]"})).join(","),T=function(e,t,n,a){var o=k(n),r=k(a);(function(e,t){return m(e).reduce((function(e,n){if(!n.attributes)return e;var a=m(n.attributes),o=t?a.filter(t):a;return e.concat(o)}),[])})(e.querySelectorAll(x),(function(e){var t=e.localName,n=e.value;return-1!==M.indexOf(t)&&-1!==n.indexOf("url("+o)})).forEach((function(e){return e.value=e.value.replace(new RegExp(o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),r)})),function(e,t,n){m(e).forEach((function(e){var a=e.getAttribute(O);if(a&&0===a.indexOf(t)){var o=a.replace(t,n);e.setAttributeNS(S,O,o)}}))}(t,o,r)},C={MOUNT:"mount",SYMBOL_MOUNT:"symbol_mount"};return function(e){function n(n){var a=this;void 0===n&&(n={}),e.call(this,t(v,n));var o,r=(o=o||Object.create(null),{on:function(e,t){(o[e]||(o[e]=[])).push(t)},off:function(e,t){o[e]&&o[e].splice(o[e].indexOf(t)>>>0,1)},emit:function(e,t){(o[e]||[]).map((function(e){e(t)})),(o["*"]||[]).map((function(n){n(e,t)}))}});this._emitter=r,this.node=null;var i=this.config;if(i.autoConfigure&&this._autoConfigure(n),i.syncUrlsWithBaseTag){var s=document.getElementsByTagName("base")[0].getAttribute("href");r.on(C.MOUNT,(function(){return a.updateUrls("#",s)}))}var l=this._handleLocationChange.bind(this);this._handleLocationChange=l,i.listenLocationChangeEvent&&window.addEventListener(i.locationChangeEvent,l),i.locationChangeAngularEmitter&&P(i.locationChangeEvent),r.on(C.MOUNT,(function(e){i.moveGradientsOutsideSymbol&&E(e)})),r.on(C.SYMBOL_MOUNT,(function(e){i.moveGradientsOutsideSymbol&&E(e.parentNode),(y.isIE()||y.isEdge())&&g(e)}))}e&&(n.__proto__=e),n.prototype=Object.create(e&&e.prototype),n.prototype.constructor=n;var a={isMounted:{}};return a.isMounted.get=function(){return!!this.node},n.prototype._autoConfigure=function(e){var t=this.config;void 0===e.syncUrlsWithBaseTag&&(t.syncUrlsWithBaseTag=void 0!==document.getElementsByTagName("base")[0]),void 0===e.locationChangeAngularEmitter&&(t.locationChangeAngularEmitter="angular"in window),void 0===e.moveGradientsOutsideSymbol&&(t.moveGradientsOutsideSymbol=y.isFirefox())},n.prototype._handleLocationChange=function(e){var t=e.detail,n=t.oldUrl,a=t.newUrl;this.updateUrls(n,a)},n.prototype.add=function(t){var n=e.prototype.add.call(this,t);return this.isMounted&&n&&(t.mount(this.node),this._emitter.emit(C.SYMBOL_MOUNT,t.node)),n},n.prototype.attach=function(e){var t=this,n=this;if(n.isMounted)return n.node;var a="string"==typeof e?document.querySelector(e):e;return n.node=a,this.symbols.forEach((function(e){e.mount(n.node),t._emitter.emit(C.SYMBOL_MOUNT,e.node)})),m(a.querySelectorAll("symbol")).forEach((function(e){var t=h.createFromExistingNode(e);t.node=e,n.add(t)})),this._emitter.emit(C.MOUNT,a),a},n.prototype.destroy=function(){var e=this.config,t=this.symbols,n=this._emitter;t.forEach((function(e){return e.destroy()})),n.off("*"),window.removeEventListener(e.locationChangeEvent,this._handleLocationChange),this.isMounted&&this.unmount()},n.prototype.mount=function(e,t){if(void 0===e&&(e=this.config.mountTo),void 0===t&&(t=!1),this.isMounted)return this.node;var n="string"==typeof e?document.querySelector(e):e,a=this.render();return this.node=a,t&&n.childNodes[0]?n.insertBefore(a,n.childNodes[0]):n.appendChild(a),this._emitter.emit(C.MOUNT,a),a},n.prototype.render=function(){return p(this.stringify())},n.prototype.unmount=function(){this.node.parentNode.removeChild(this.node)},n.prototype.updateUrls=function(e,t){if(!this.isMounted)return!1;var n=document.querySelectorAll(this.config.usagesToUpdate);return T(this.node,n,b(e)+"#",b(t)+"#"),!0},Object.defineProperties(n.prototype,a),n}(d)}()})),Be=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,o=(n=Re)&&n.__esModule?n:{default:n};!("undefined"==typeof window||!window.document||!window.document.createElement)?(a=new o.default({attrs:{id:"__SVG_SPRITE_NODE__"}})).mount():a=null;var r=a;t.default=r}));g(Be);var De=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=(n=y)&&n.__esModule?n:{default:n};function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function r(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(n,!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u={display:"block"};function c(e){var t=e.width,n=e.height,r=e.viewBox,s=e.id,c=e.className,d=e.style,f=e.fill,p=e.getRootRef,h=l(e,["width","height","viewBox","id","className","style","fill","getRootRef"]),v=Math.max(t,n);return a.default.createElement("div",o({},h,{ref:p,className:"Icon Icon--".concat(v," Icon--").concat(s," ").concat(c),style:i({},d,{width:t,height:n})}),a.default.createElement("svg",{viewBox:r,width:t,height:n,style:u},a.default.createElement("use",{xlinkHref:"#".concat(s),style:{fill:"currentColor",color:f}})))}c.defaultProps={className:"",style:{}};var d=c;t.default=d}));g(De);var Ve=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(y),a=i(Ne),o=i(Be),r=i(De);function i(e){return e&&e.__esModule?e:{default:e}}var s="0 0 24 24",l="spinner_24";if(o.default){var u=new a.default({id:l,viewBox:s,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="spinner_24"><path d="M12 24a1.25 1.25 0 1 1 0-2.5A9.5 9.5 0 1 0 2.5 12c0 1.1.187 2.175.548 3.188a1.25 1.25 0 0 1-2.355.84A11.981 11.981 0 0 1 0 12C0 5.373 5.373 0 12 0s12 5.373 12 12-5.373 12-12 12z" fill="currentColor" fill-rule="nonzero" /></symbol>'});o.default.add(u)}var c=function(e){return n.default.createElement(r.default,(0,je.assign)({},e,{viewBox:s,id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};t.default=c}));g(Ve);var Ie=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(y),a=i(Ne),o=i(Be),r=i(De);function i(e){return e&&e.__esModule?e:{default:e}}var s="0 0 32 32",l="spinner_32";if(o.default){var u=new a.default({id:l,viewBox:s,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="spinner_32"><path d="M16 32a1.5 1.5 0 0 1 0-3c7.18 0 13-5.82 13-13S23.18 3 16 3 3 8.82 3 16c0 1.557.273 3.074.8 4.502A1.5 1.5 0 1 1 .986 21.54 15.97 15.97 0 0 1 0 16C0 7.163 7.163 0 16 0s16 7.163 16 16-7.163 16-16 16z" fill="currentColor" fill-rule="nonzero" /></symbol>'});o.default.add(u)}var c=function(e){return n.default.createElement(r.default,(0,je.assign)({},e,{viewBox:s,id:l,width:isNaN(e.width)?32:+e.width,height:isNaN(e.height)?32:+e.height}))};t.default=c}));g(Ie);var Le=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(y),a=i(Ne),o=i(Be),r=i(De);function i(e){return e&&e.__esModule?e:{default:e}}var s="0 0 44 44",l="spinner_44";if(o.default){var u=new a.default({id:l,viewBox:s,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 44 44" id="spinner_44"><path d="M22 44a1.5 1.5 0 0 1 0-3c10.493 0 19-8.507 19-19S32.493 3 22 3 3 11.507 3 22c0 2.208.376 4.363 1.103 6.397a1.5 1.5 0 1 1-2.825 1.01A21.964 21.964 0 0 1 0 22C0 9.85 9.85 0 22 0s22 9.85 22 22-9.85 22-22 22z" fill="currentColor" fill-rule="nonzero" /></symbol>'});o.default.add(u)}var c=function(e){return n.default.createElement(r.default,(0,je.assign)({},e,{viewBox:s,id:l,width:isNaN(e.width)?44:+e.width,height:isNaN(e.height)?44:+e.height}))};t.default=c}));g(Le);var We=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(y),a=i(Ne),o=i(Be),r=i(De);function i(e){return e&&e.__esModule?e:{default:e}}var s="0 0 16 16",l="spinner_16";if(o.default){var u=new a.default({id:l,viewBox:s,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" id="spinner_16"><path d="M8 16a1 1 0 1 1 0-2 6 6 0 1 0-5.7-4.12 1 1 0 1 1-1.9.626A8 8 0 1 1 8 16z" fill="currentColor" fill-rule="nonzero" /></symbol>'});o.default.add(u)}var c=function(e){return n.default.createElement(r.default,(0,je.assign)({},e,{viewBox:s,id:l,width:isNaN(e.width)?16:+e.width,height:isNaN(e.height)?16:+e.height}))};t.default=c}));g(We);var He=g(b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(y),a=i(Ne),o=i(Be),r=i(De);function i(e){return e&&e.__esModule?e:{default:e}}var s="0 0 24 24",l="dismiss_24";if(o.default){var u=new a.default({id:l,viewBox:s,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="dismiss_24"><g fill="currentColor" fill-rule="nonzero"><circle opacity=".12" cx="12" cy="12" r="12" /><path d="M12 10.727l3.464-3.463a.9.9 0 1 1 1.272 1.272L13.273 12l3.463 3.464a.9.9 0 1 1-1.272 1.272L12 13.273l-3.464 3.463a.9.9 0 1 1-1.272-1.272L10.727 12 7.264 8.536a.9.9 0 0 1 1.272-1.272L12 10.727z" /></g></symbol>'});o.default.add(u)}var c=function(e){return n.default.createElement(r.default,(0,je.assign)({},e,{viewBox:s,id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};t.default=c}))),Fe=g(b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(y),a=i(Ne),o=i(Be),r=i(De);function i(e){return e&&e.__esModule?e:{default:e}}var s="0 0 24 24",l="cancel_24";if(o.default){var u=new a.default({id:l,viewBox:s,content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="cancel_24"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path d="M18.3 5.7a.99.99 0 0 0-1.4 0L12 10.6 7.1 5.7a.99.99 0 0 0-1.4 1.4l4.9 4.9-4.9 4.9a.99.99 0 0 0 1.4 1.4l4.9-4.9 4.9 4.9a.99.99 0 0 0 1.4-1.4L13.4 12l4.9-4.9a.99.99 0 0 0 0-1.4z" fill="currentColor" /></g></symbol>'});o.default.add(u)}var c=function(e){return n.default.createElement(r.default,(0,je.assign)({},e,{viewBox:s,id:l,width:isNaN(e.width)?24:+e.width,height:isNaN(e.height)?24:+e.height}))};t.default=c})));process.env.VKUI_VERSION;class Ye extends y.Component{constructor(e){super(e),this.state={activePage:e.activePage,activeModal:null,modalHistory:[],modalParams:{}},this.goPage=this.goPage.bind(this),this.showModal=this.showModal.bind(this),this.hideModal=this.hideModal.bind(this),this.navigatorObject={goPage:this.goPage,showModal:this.showModal,hideModal:window.history.back.bind(window.history)}}goPage(e){oe.send("VKWebAppDisableSwipeBack",{}),this.setState({activePage:e})}showModal(e,t={}){const{modalHistory:n}=this.state;this.setState({activeModal:e,modalHistory:-1!==n.indexOf(e)?n.splice(0,n.indexOf(e)+1):[...n,e],modalParams:t})}hideModal(){this.setState({activeModal:null,modalHistory:[]})}__buildModals(){const e=this.props.modals||[];if(0===e.length)return null;const{activeModal:t,modalParams:n}=this.state,{hideModal:a,navigatorObject:o}=this,{platform:r}=this.props;return y.createElement(ye,{activeModal:t,children:y.Children.map(e,e=>y.cloneElement(e,{...e.props,onClose:window.history.back.bind(window.history),header:y.createElement(we,{left:r===Me&&y.createElement(Oe,{onClick:a,children:y.createElement(Fe,null)}),right:r===xe&&y.createElement(Oe,{onClick:a,children:y.createElement(He,null)}),children:e.props.title||""}),navigator:{...o,params:e.props.id===t?n:{}}}))})}render(){const{activePage:e,activeModal:t}=this.state,{showModal:n,hideModal:a,goPage:o}=this,{children:r,modal:i}=this.props,s=this.__buildModals(i);return y.createElement(se,{isWebView:!0},y.createElement(fe,{activeView:e,modal:s},y.Children.map(r,e=>y.cloneElement(e,{id:e.props.id,showModal:n,hideModal:a,goPage:o,isModalOpen:null!==t}))))}}Ye.propTypes={activePage:F.string.isRequired};var qe,Ue=(qe=Ye,function(e){var t=y.useContext(Ce);return y.createElement(qe,f({},e,{platform:t.platform||Te()}))}),Xe=b((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.duration,n=e.timing,a=e.draw;if("undefined"==typeof window)return;var o=window.performance.now();window.requestAnimationFrame((function e(r){var i=(r-o)/t;i>1&&(i=1);var s=n(i);a(s),i<1&&window.requestAnimationFrame(e)}))}}));g(Xe);var $e=b((function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(n,!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return t.forEach((function(e){return delete n[e]})),n};var a=t(s);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}}));g($e);var Ke=b((function(e,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=u.baseClassNames=void 0;var c=t(n),d=t(a),f=t(o),p=t(r),v=t(l),m=t(i),w=t(s),g=t(y),b=t(h),P=t(F),E=t(ce),S=t(le),O=(0,E.default)("PanelHeader");u.baseClassNames=O;var _=function(e){function t(){var e,n;(0,c.default)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=(0,f.default)(this,(e=(0,p.default)(t)).call.apply(e,[this].concat(o))),(0,w.default)((0,v.default)(n),"state",{ready:!1}),n}return(0,m.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this.context.panel;this.leftNode=this.document.getElementById("header-left-"+e),this.addonNode=this.document.getElementById("header-addon-"+e),this.titleNode=this.document.getElementById("header-title-"+e),this.rightNode=this.document.getElementById("header-right-"+e),this.bgNode=this.document.getElementById("header-bg-"+e);var t=this.props.getRef;if(t){var n=this.document.getElementById("panel-header-".concat(e));"function"==typeof t?t(n):t.current=n}this.setState({ready:!0})}},{key:"render",value:function(){var e,t,n,a,o,r=this.props,i=r.left,s=r.addon,l=r.children,u=r.right,c=r.theme,d=r.noShadow,f=r.transparent,p="string"==typeof l||"number"==typeof l;return this.state.ready?[b.default.createPortal(g.default.createElement("div",{className:(0,S.default)("PanelHeader-bg",(e={},(0,w.default)(e,"PanelHeader-bg--".concat(c),!0),(0,w.default)(e,"PanelHeader-bg--tp",f),(0,w.default)(e,"PanelHeader-bg--no-shadow",d||["bright_light","space_gray"].indexOf(this.context.scheme)>=0),e))}),this.bgNode),b.default.createPortal(g.default.createElement("div",{className:(0,S.default)("PanelHeader-left-in",(t={},(0,w.default)(t,"PanelHeader-left-in--".concat(c),!0),(0,w.default)(t,"PanelHeader-left-in--tp",f),t))},i),this.leftNode),ue.IS_PLATFORM_IOS&&b.default.createPortal(g.default.createElement("div",{className:(0,S.default)("PanelHeader-addon",(n={},(0,w.default)(n,"PanelHeader-addon--".concat(c),!0),(0,w.default)(n,"PanelHeader-addon--tp",f),n))},s),this.addonNode),b.default.createPortal(g.default.createElement("div",{className:(0,S.default)("PanelHeader-content",(a={},(0,w.default)(a,"PanelHeader-content--".concat(c),!0),(0,w.default)(a,"PanelHeader-content--tp",f),a))},p?g.default.createElement("span",null,l):l),this.titleNode),b.default.createPortal(g.default.createElement("div",{className:(0,S.default)("PanelHeader-right",(o={},(0,w.default)(o,"PanelHeader-right--".concat(c),!0),(0,w.default)(o,"PanelHeader-right--tp",f),(0,w.default)(o,"PanelHeader-right--vkapps","vkapps"===this.webviewType),o))},"internal"===this.webviewType?u:null),this.rightNode)]:null}},{key:"document",get:function(){return this.context.document||document}},{key:"webviewType",get:function(){return this.context.webviewType||"vkapps"}}]),t}(g.default.Component);u.default=_,(0,w.default)(_,"propTypes",{left:P.default.node,addon:P.default.node,right:P.default.node,children:P.default.node,theme:P.default.oneOf(["light","alternate","brand"]),transparent:P.default.bool,noShadow:P.default.bool,getRef:P.default.oneOfType([P.default.func,P.default.shape({current:P.default.any})])}),(0,w.default)(_,"defaultProps",{theme:"brand",transparent:!1,noShadow:!1}),(0,w.default)(_,"contextTypes",{panel:P.default.string,document:P.default.any,scheme:P.default.string,webviewType:P.default.oneOf(["vkapps","internal"])})}));g(Ke);Ke.baseClassNames;var ze=b((function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return function(t){var n=o.default.useContext(Pe.SSRContext);return o.default.createElement(e,(0,a.default)({},t,{platform:n.platform||(0,ue.platform)()}))}};var a=t(f),o=t(y)}));g(ze);var Ge=b((function(e,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=u.transitionEndEventName=u.transitionStartEventName=void 0;var d=t(n),f=t(a),p=t(o),h=t(r),v=t(l),m=t(i),w=t(s),g=c(y),b=t(F),P=t(le),E=t(Xe),S=t(de),O=t(ce),_=t(he),k=t($e),M=t(ze);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){(0,w.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}u.transitionStartEventName="VKUI:View:transition-start";var C,N="VKUI:View:transition-end";u.transitionEndEventName=N,function(e){e[e.fail=1]="fail",e[e.success=2]="success"}(C||(C={}));var A={},j=["input","textarea"],R=function(e){function t(e){var n;return(0,d.default)(this,t),n=(0,p.default)(this,(0,h.default)(t).call(this,e)),(0,w.default)((0,v.default)(n),"refsStore",{}),(0,w.default)((0,v.default)(n),"transitionEndHandler",(function(e){if(!e||["animation-ios-next-forward","animation-ios-prev-back","animation-android-next-forward","animation-android-prev-back"].indexOf(e.animationName)>-1){var t=n.props.activePanel,a=n.state.isBack,o=n.state.prevPanel;n.document.dispatchEvent(new n.window.CustomEvent(N)),n.setState({prevPanel:null,nextPanel:null,visiblePanels:[t],activePanel:t,animated:!1,isBack:void 0,scrolls:a?(0,k.default)(n.state.scrolls,[o]):n.state.scrolls},(function(){a&&n.window.scrollTo(0,n.state.scrolls[t]),n.props.onTransition&&n.props.onTransition({isBack:a,from:o,to:t})}))}})),(0,w.default)((0,v.default)(n),"swipingBackTransitionEndHandler",(function(e){var t=e.target;if(e.propertyName.indexOf("transform")>=0&&t.classList.contains("View__panel--swipe-back-next"))switch(n.state.swipeBackResult){case C.fail:n.onSwipeBackCancel();break;case C.success:n.onSwipeBackSuccess()}})),(0,w.default)((0,v.default)(n),"onScrollTop",(function(){if(n.state.activePanel){var e=n.document.body.scrollTop||n.document.documentElement.scrollTop;e&&(0,E.default)({duration:200,timing:function(e){return Math.sqrt(e)},draw:function(t){n.window.scrollTo(0,e-t*e)}})}})),(0,w.default)((0,v.default)(n),"onMoveX",(function(e){if(!(j.indexOf(e.originalEvent.target.tagName.toLowerCase())>-1)){var t=n.props.platform;if(t!==ue.IOS||n.context.isWebView||!(e.startX<=70||e.startX>=n.window.innerWidth-70)||n.state.browserSwipe||n.setState({browserSwipe:!0}),t===ue.IOS&&n.context.isWebView&&n.props.onSwipeBack){if(n.state.animated&&e.startX<=70)return;var a;if(e.startX<=70&&!n.state.swipingBack&&n.props.history.length>1&&n.setState({swipingBack:!0,swipebackStartX:e.startX,startT:e.startT,swipeBackPrevPanel:n.state.activePanel,swipeBackNextPanel:n.props.history.slice(-2)[0],scrolls:T({},n.state.scrolls,(0,w.default)({},n.state.activePanel,n.window.pageYOffset))}),n.state.swipingBack)a=e.shiftX<0?0:e.shiftX>n.window.innerWidth-n.state.swipebackStartX?n.window.innerWidth:e.shiftX,n.setState({swipeBackShift:a})}}})),(0,w.default)((0,v.default)(n),"onEnd",(function(){if(n.state.swipingBack){var e=n.state.swipeBackShift/(Date.now()-n.state.startT)*1e3;0===n.state.swipeBackShift?n.onSwipeBackCancel():n.state.swipeBackShift>=n.window.innerWidth?n.onSwipeBackSuccess():e>250||n.state.swipebackStartX+n.state.swipeBackShift>n.window.innerWidth/2?n.setState({swipeBackResult:C.success}):n.setState({swipeBackResult:C.fail})}})),(0,w.default)((0,v.default)(n),"getRef",(function(e){if(e&&e.container&&e.id){for(var t=e;t.container;)t=t.container;n.refsStore[e.id]=t}})),n.state={scrolls:A[e.id]||{},animated:!1,visiblePanels:[e.activePanel],activePanel:e.activePanel,isBack:void 0,prevPanel:null,nextPanel:null,swipingBack:!1,swipebackStartX:0,swipeBackShift:0,swipeBackNextPanel:null,swipeBackPrevPanel:null,swipeBackResult:null,browserSwipe:!1},n}return(0,m.default)(t,e),(0,f.default)(t,[{key:"componentWillUnmount",value:function(){this.props.id&&(A[this.props.id]=this.state.scrolls)}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(this.props.popout&&!e.popout&&this.blurActiveElement(),this.props.modal&&!e.modal&&this.blurActiveElement(),e.activePanel!==this.props.activePanel&&!t.swipingBack&&!t.browserSwipe){var a=this.panels.find((function(t){return t.props.id===e.activePanel||t.props.id===n.props.activePanel})),o=a&&a.props.id===this.props.activePanel;this.blurActiveElement(),this.setState({visiblePanels:[e.activePanel,this.props.activePanel],prevPanel:e.activePanel,nextPanel:this.props.activePanel,activePanel:null,animated:!0,scrolls:T({},t.scrolls,(0,w.default)({},e.activePanel,this.window.pageYOffset)),isBack:o})}if(e.activePanel!==this.props.activePanel&&t.swipingBack){var r=this.props.activePanel,i=e.activePanel;this.setState({swipeBackPrevPanel:null,swipeBackNextPanel:null,swipingBack:!1,swipeBackResult:null,swipebackStartX:0,swipeBackShift:0,activePanel:r,visiblePanels:[r],scrolls:(0,k.default)(t.scrolls,[t.swipeBackPrevPanel])},(function(){n.document.dispatchEvent(new n.window.CustomEvent(N)),window.scrollTo(0,t.scrolls[n.state.activePanel]),e.onTransition&&e.onTransition({isBack:!0,from:i,to:r})}))}var s=this.state.scrolls;if(!t.animated&&this.state.animated){this.document.dispatchEvent(new this.window.CustomEvent("VKUI:View:transition-start",{detail:{scrolls:s}}));var l=this.pickPanel(this.state.nextPanel);this.pickPanel(this.state.prevPanel).scrollTop=s[this.state.prevPanel],this.state.isBack&&(l.scrollTop=s[this.state.nextPanel]),this.waitAnimationFinish(this.pickPanel(this.state.isBack?this.state.prevPanel:this.state.nextPanel),this.transitionEndHandler)}if(!t.swipingBack&&this.state.swipingBack){this.document.dispatchEvent(new this.window.CustomEvent("VKUI:View:transition-start",{detail:{scrolls:s}})),this.props.onSwipeBackStart&&this.props.onSwipeBackStart();var u=this.pickPanel(this.state.swipeBackNextPanel),c=this.pickPanel(this.state.swipeBackPrevPanel);u.scrollTop=s[this.state.swipeBackNextPanel],c.scrollTop=s[this.state.swipeBackPrevPanel]}!t.swipeBackResult&&this.state.swipeBackResult&&this.waitTransitionFinish(this.pickPanel(this.state.swipeBackNextPanel),this.swipingBackTransitionEndHandler),t.swipeBackResult!==C.fail||this.state.swipeBackResult||this.window.scrollTo(0,s[this.state.activePanel]),e.activePanel!==this.props.activePanel&&this.state.browserSwipe&&this.setState({browserSwipe:!1,nextPanel:null,prevPanel:null,animated:!1,visiblePanels:[this.props.activePanel],activePanel:this.props.activePanel})}},{key:"waitTransitionFinish",value:function(e,t){if(S.default.supported){var n=S.default.prefix?S.default.prefix+"TransitionEnd":"transitionend";e.removeEventListener(n,t),e.addEventListener(n,t)}else setTimeout((function(){return t()}),this.props.platform===ue.ANDROID?300:600)}},{key:"waitAnimationFinish",value:function(e,t){if(S.default.supported){var n=S.default.prefix?S.default.prefix+"AnimationEnd":"animationend";e.removeEventListener(n,t),e.addEventListener(n,t)}else setTimeout((function(){return t()}),this.props.platform===ue.ANDROID?300:600)}},{key:"blurActiveElement",value:function(){void 0!==this.window&&this.document.activeElement&&this.document.activeElement.blur()}},{key:"pickPanel",value:function(e){var t=this.document.getElementById(e);return t||console.warn("Element #".concat(e," not found")),t&&t.parentNode.parentNode}},{key:"onSwipeBackSuccess",value:function(){this.props.onSwipeBack&&this.props.onSwipeBack()}},{key:"onSwipeBackCancel",value:function(){var e=this;this.setState({swipeBackPrevPanel:null,swipeBackNextPanel:null,swipingBack:!1,swipeBackResult:null,swipebackStartX:0,swipeBackShift:0},(function(){e.document.dispatchEvent(new e.window.CustomEvent(N))}))}},{key:"calcPanelSwipeStyles",value:function(e){var t=e===this.state.swipeBackPrevPanel,n=e===this.state.swipeBackNextPanel;if(!t&&!n||this.state.swipeBackResult)return{};var a="".concat(this.state.swipeBackShift,"px"),o="".concat(100*this.state.swipeBackShift/this.window.innerWidth/2-50,"%"),r=.3*(this.window.innerWidth-this.state.swipeBackShift)/this.window.innerWidth;return this.state.swipeBackResult?t?{boxShadow:"-2px 0 12px rgba(0, 0, 0, ".concat(r,")")}:{}:n?{transform:"translate3d(".concat(o,", 0, 0)"),WebkitTransform:"translate3d(".concat(o,", 0, 0)")}:t?{transform:"translate3d(".concat(a,", 0, 0)"),WebkitTransform:"translate3d(".concat(a,", 0, 0)"),boxShadow:"-2px 0 12px rgba(0, 0, 0, ".concat(r,")")}:{}}},{key:"calcHeaderSwipeStyles",value:function(e){var t=e===this.state.swipeBackPrevPanel,n=e===this.state.swipeBackNextPanel;if(!t&&!n||null!==this.state.swipeBackResult)return{title:{},bg:{},left:{},addon:{},right:{}};var a=this.state.swipeBackShift/this.window.innerWidth,o=this.state.swipeBackShift/this.window.innerWidth*30,r=this.state.swipeBackShift/this.window.innerWidth*30;return n?{title:{transform:"translate3d(".concat(-30+o,"vw, 0, 0)"),WebkitTransform:"translate3d(".concat(-30+o,"vw, 0, 0)"),opacity:a},left:{opacity:a},addon:{opacity:1,transform:"translate3d(".concat(-30+r,"vw, 0, 0)"),WebkitTransform:"translate3d(".concat(-30+r,"vw, 0, 0)")},right:{opacity:a}}:t?{title:{transform:"translate3d(".concat(o,"vw, 0, 0)"),WebkitTransform:"translate3d(".concat(o,"vw, 0, 0)"),opacity:1-a},bg:{opacity:1-a},left:{opacity:1-a},addon:{transform:"translate3d(".concat(r,"vw, 0, 0)"),WebkitTransform:"translate3d(".concat(r,"vw, 0, 0)"),opacity:1-a}}:{}}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,a=t.popout,o=t.modal,r=t.header,i=t.platform,s=this.state,l=s.prevPanel,u=s.nextPanel,c=s.activePanel,d=s.swipeBackPrevPanel,f=s.swipeBackNextPanel,p=s.swipeBackResult,h=!!a,v=!!o,m=this.panels.filter((function(t){var n=t.props.id;return e.state.visiblePanels.indexOf(n)>-1||n===d||n===f})),y={"View--header":r,"View--animated":this.state.animated,"View--swiping-back":this.state.swipingBack};return g.default.createElement(_.default,{component:"section",className:(0,P.default)((0,O.default)("View",i),this.props.className,y),style:n,onMoveX:this.onMoveX,onEnd:this.onEnd},r&&g.default.createElement("div",{className:"View__header"},i===ue.IOS&&g.default.createElement("div",{className:"View__header-scrolltop",onClick:this.onScrollTop}),g.default.createElement("div",{className:(0,P.default)(Ke.baseClassNames)},m.map((function(t){var n=t.props.id,a=e.calcHeaderSwipeStyles(n);return g.default.createElement("div",{className:(0,P.default)("PanelHeader__in",{"PanelHeader__in--active":n===c,"PanelHeader__in--prev":n===l,"PanelHeader__in--next":n===u,"PanelHeader__in--swipe-back-prev":n===d,"PanelHeader__in--swipe-back-next":n===f,"PanelHeader__in--swipe-back-success":p===C.success,"PanelHeader__in--swipe-back-failed":p===C.fail}),key:n,id:"panel-header-".concat(n)},g.default.createElement("div",{className:"PanelHeader__bg",key:n,id:"header-bg-".concat(n),style:a.bg}),g.default.createElement("div",{className:"PanelHeader__container"},g.default.createElement("div",{className:"PanelHeader__left"},g.default.createElement("div",{className:"PanelHeader__left-in",id:"header-left-".concat(n),style:a.left}),i===ue.IOS&&g.default.createElement("div",{className:"PanelHeader__addon",id:"header-addon-".concat(n),style:a.addon})),g.default.createElement("div",{className:"PanelHeader__content",style:a.title,id:"header-title-".concat(n)}),g.default.createElement("div",{className:"PanelHeader__right",id:"header-right-".concat(n),style:a.right})))})))),g.default.createElement("div",{className:"View__panels"},m.map((function(t){var n=t.props.id;return g.default.createElement("div",{className:(0,P.default)("View__panel",{"View__panel--active":n===c,"View__panel--prev":n===l,"View__panel--next":n===u,"View__panel--swipe-back-prev":n===d,"View__panel--swipe-back-next":n===f,"View__panel--swipe-back-success":p===C.success,"View__panel--swipe-back-failed":p===C.fail}),style:e.calcPanelSwipeStyles(n),key:n},g.default.createElement("div",{className:"View__panel-in"},t))}))),h&&g.default.createElement("div",{className:"View__popout"},a),v&&g.default.createElement("div",{className:"View__modal"},o))}},{key:"document",get:function(){return this.context.document||document}},{key:"window",get:function(){return this.context.window||window}},{key:"panels",get:function(){return[].concat(this.props.children)}}]),t}(g.Component);(0,w.default)(R,"defaultProps",{header:!0,history:[]}),(0,w.default)(R,"contextTypes",{isWebView:b.default.bool,window:b.default.any,document:b.default.any});var B=(0,M.default)(R);u.default=B})),Je=g(Ge),Qe=(Ge.transitionEndEventName,Ge.transitionStartEventName,b((function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t(f),o=t(p),r=t(y),i=t(ce),s=t(le),l=t(Ve),u=t(Ie),c=t(Le),d=t(We),h=t(Ee),v=r.default.memo((function(e){var t=e.className,n=e.size,f=(0,o.default)(e,["className","size"]),p=(0,h.default)();return r.default.createElement("div",(0,a.default)({},f,{className:(0,s.default)((0,i.default)("Spinner",p),t)}),function(e){switch(e){case"large":return r.default.createElement(c.default,{className:"Spinner__self"});case"medium":return r.default.createElement(u.default,{className:"Spinner__self"});case"small":return r.default.createElement(d.default,{className:"Spinner__self"});default:return r.default.createElement(l.default,{className:"Spinner__self"})}}(n))}));v.defaultProps={size:"regular"};var m=v;n.default=m})));g(Qe);var Ze=b((function(e,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var c=t(f),d=t(p),h=t(n),v=t(a),m=t(o),w=t(r),g=t(l),b=t(i),P=t(s),E=t(y),S=t(ce),O=t(le),_=t(F),k=t(de),M=(0,S.default)("PopoutWrapper"),x=function(e){function t(){var e,n;(0,h.default)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=(0,m.default)(this,(e=(0,w.default)(t)).call.apply(e,[this].concat(o))),(0,P.default)((0,g.default)(n),"state",{opened:!1}),(0,P.default)((0,g.default)(n),"onFadeInEnd",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{manual:!0};("animation-full-fade-in"===e.animationName||e.manual)&&n.setState({opened:!0})})),(0,P.default)((0,g.default)(n),"preventTouch",(function(e){return e.preventDefault()})),(0,P.default)((0,g.default)(n),"onClick",(function(e){return n.state.opened&&n.props.onClick&&n.props.onClick(e)})),(0,P.default)((0,g.default)(n),"getRef",(function(e){return n.el=e})),n}return(0,b.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){window.addEventListener("touchmove",this.preventTouch,{passive:!1}),this.waitAnimationFinish(this.el,this.onFadeInEnd)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("touchmove",this.preventTouch,{passive:!1}),clearTimeout(this.animationFinishTimeout)}},{key:"waitAnimationFinish",value:function(e,t){if(k.default.supported){var n=k.default.prefix?k.default.prefix+"AnimationEnd":"animationend";e.removeEventListener(n,t),e.addEventListener(n,t)}else this.animationFinishTimeout=setTimeout(t.bind(this),ue.IS_PLATFORM_ANDROID?300:600)}},{key:"render",value:function(){var e,t=this.props,n=t.v,a=t.h,o=t.closing,r=t.children,i=t.hasMask,s=(t.onClick,t.className),l=(0,d.default)(t,["v","h","closing","children","hasMask","onClick","className"]);return E.default.createElement("div",(0,c.default)({},l,{className:(0,O.default)(M,(e={},(0,P.default)(e,"PopoutWrapper--v-".concat(n),n),(0,P.default)(e,"PopoutWrapper--h-".concat(a),a),(0,P.default)(e,"PopoutWrapper--closing",o),e),s),onClick:this.onClick,ref:this.getRef}),i&&E.default.createElement("div",{className:"PopoutWrapper__mask"}),E.default.createElement("div",{className:"PopoutWrapper__container"},r))}}]),t}(E.default.Component);u.default=x,(0,P.default)(x,"propTypes",{hasMask:_.default.bool,v:_.default.oneOf(["top","center","bottom"]),h:_.default.oneOf(["left","center","right"]),closing:_.default.bool,onClick:_.default.func,style:_.default.object,children:_.default.node,className:_.default.string}),(0,P.default)(x,"defaultProps",{hasMask:!0,v:"center",h:"center",closing:!1})}));g(Ze);var et=g(b((function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t(f),o=t(p),r=t(y),i=t(Qe),s=t(Ze),l=t(ce),u=t(le),c=t(Ee),d=function(e){var t=e.style,n=e.className,d=(0,o.default)(e,["style","className"]),f=(0,c.default)();return r.default.createElement(s.default,{className:(0,u.default)((0,l.default)("ScreenSpinner",f),n),style:t},r.default.createElement("div",{className:"ScreenSpinner__container"},r.default.createElement(i.default,(0,a.default)({size:"large"},d))))};n.default=d}))),tt=g(b((function(e,u){Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var d=t(f),h=t(p),v=t(n),m=t(a),w=t(o),g=t(r),b=t(l),P=t(i),E=t(s),S=c(y),O=t(be),_=t(Ze),k=t(ce),M=t(le),x=t(de),T=t(ze),C=function(e){function t(e){var n;return(0,v.default)(this,t),n=(0,w.default)(this,(0,g.default)(t).call(this,e)),(0,E.default)((0,b.default)(n),"element",void 0),(0,E.default)((0,b.default)(n),"onItemClick",(function(e){return function(){var t=e.action,a=e.autoclose;a?(n.setState({closing:!0}),n.waitTransitionFinish((function(){a&&n.props.onClose(),t&&t()}))):t&&t()}})),(0,E.default)((0,b.default)(n),"onClose",(function(){n.setState({closing:!0}),n.waitTransitionFinish((function(){n.props.onClose()}))})),(0,E.default)((0,b.default)(n),"stopPropagation",(function(e){return e.stopPropagation()})),n.element=S.default.createRef(),n.state={closing:!1},n}return(0,P.default)(t,e),(0,m.default)(t,[{key:"waitTransitionFinish",value:function(e){if(x.default.supported){var t=x.default.prefix?x.default.prefix+"TransitionEnd":"transitionend";this.element.current.removeEventListener(t,e),this.element.current.addEventListener(t,e)}else setTimeout(e.bind(this),this.props.platform===ue.ANDROID?200:300)}},{key:"render",value:function(){var e=this,t=this.props,n=t.actions,a=t.actionsLayout,o=t.children,r=t.className,i=t.style,s=t.platform,l=(0,h.default)(t,["actions","actionsLayout","children","className","style","platform"]),u=this.state.closing;return S.default.createElement(_.default,{className:r,closing:u,style:i,onClick:this.onClose},S.default.createElement("div",(0,d.default)({},l,{ref:this.element,onClick:this.stopPropagation,className:(0,M.default)((0,k.default)("Alert",s),{"Alert--v":"vertical"===a,"Alert--h":"horizontal"===a,"Alert--closing":u})}),S.default.createElement("div",{className:"Alert__content"},o),S.default.createElement("footer",{className:"Alert__footer"},n.map((function(t,n){return S.default.createElement(O.default,{component:"button",className:(0,M.default)("Alert__btn","Alert__btn--".concat(t.style)),onClick:e.onItemClick(t),key:"alert-action-".concat(n)},S.default.createElement("span",{dangerouslySetInnerHTML:{__html:t.title}}))})))))}}]),t}(S.Component);(0,E.default)(C,"defaultProps",{actionsLayout:"horizontal",actions:[]});var N=(0,T.default)(C);u.default=N})));class nt extends y.Component{constructor(e){super(e),this.state={activePanel:e.activePanel,homePanel:e.activePanel,history:[e.activePanel],popout:null,params:{}},this.go=this.go.bind(this),this.goPage=this.props.goPage,this.popBack=this.popBack.bind(this),this.showModal=this.showModal.bind(this),this.hideModal=this.hideModal.bind(this),this.showPopout=this.showPopout.bind(this),this.showLoader=this.showLoader.bind(this),this.hideLoader=this.hideLoader.bind(this),this.showDialog=this.showDialog.bind(this),this.navigatorObject={go:this.go,goPage:this.goPage,goBack:window.history.back.bind(window.history),showModal:this.showModal,hideModal:()=>window.history.back,showPopout:this.showPopout,showLoader:this.showLoader,hideLoader:this.hideLoader,showDialog:this.showDialog}}go(e,t={}){const{activePanel:n,homePanel:a,history:o}=this.state;n===a&&oe.send("VKWebAppEnableSwipeBack",{}),window.history.pushState({panel:e,modal:null},e),this.setState({activePanel:e,history:[...o,e],popout:null,activeModal:null,modalParams:{},params:t})}popBack(){const{history:e,popout:t,homePanel:n}=this.state,{isModalOpen:a}=this.props,{hideModal:o}=this;if(null!==t)return void this.setState({popout:null});if(a)return void o();if(1===e.length)return null;const r=e[e.length-2];r===n&&oe.send("VKWebAppDisableSwipeBack",{}),this.setState({activePanel:r,history:e.slice(0,e.length-1),popout:null,activeModal:null,modalHistory:[],modalParams:{}})}showPopout(e){this.setState({popout:e})}showLoader(){this.showPopout(y.createElement(et,null))}hideLoader(){this.showPopout(null)}showDialog({title:e,description:t,buttonText:n,action:a}){this.showPopout(y.createElement(tt,{actionsLayout:"vertical",actions:[{title:n||"",action:a,style:"destructive"},{title:"",autoclose:!0,style:"cancel"}],onClose:()=>this.showPopout(null)},y.createElement("h2",null,e),y.createElement("p",null,t)))}showModal(e,t={}){const{showModal:n}=this.props,{activePanel:a}=this.state;oe.send("VKWebAppDisableSwipeBack",{}),window.history.pushState({panel:a,modal:e},a),n(e,t)}hideModal(){const{hideModal:e}=this.props,{activePanel:t,homePanel:n}=this.state;t!==n&&oe.send("VKWebAppEnableSwipeBack",{}),e()}componentDidMount(){const{homePanel:e}=this.state;oe.send("VKWebAppDisableSwipeBack",{}),window.addEventListener("popstate",this.popBack),window.history.replaceState({panel:e},e)}componentWillUnmount(){window.removeEventListener("popstate",this.popBack)}render(){const{id:e,children:t}=this.props,{activePanel:n,history:a,popout:o,params:r}=this.state,{goBack:i,navigatorObject:s}=this;return y.createElement(Je,{id:e,activePanel:n,history:a,popout:o,onSwipeBack:i},y.Children.map(t,e=>y.cloneElement(e,{id:e.props.id,navigator:{...s,params:e.props.id===n?r:{}}})))}}return nt.propTypes={id:F.string.isRequired,activePanel:F.string.isRequired,children:F.any},F.defaultProps={children:[]},{Stack:Ue,Page:nt}}));
